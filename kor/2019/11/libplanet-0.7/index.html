<!doctype html><html lang=ko prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=description content><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content><meta property="og:type" content="article"><meta property="og:description" content><meta property="og:title" content="Libplanet 0.7 릴리스"><meta property="og:site_name" content="플라네타리움 엔지니어링 스낵"><meta property="og:image" content="https://snack.planetarium.dev/og/kor.png"><meta property="og:url" content="https://snack.planetarium.dev/kor/2019/11/libplanet-0.7/"><meta property="og:locale" content="ko"><meta property="article:published_time" content="2019-11-11"><meta property="article:modified_time" content="2019-11-11"><meta name=twitter:card content="summary"><meta name=twitter:site content="@"><meta name=twitter:creator content="@"><meta name=twitter:title content="Libplanet 0.7 릴리스 | 플라네타리움 엔지니어링 스낵"><meta name=twitter:description content="안녕하세요. 저희 팀은 Libplanet의 일곱 번째 마이너 버전인 0.7 버전을 릴리스했습니다.
Libplanet은 분산 P2P로 돌아가는 온라인 멀티플레이어 게임을 만들 때, 그러한 게임들이 매번 구현해야 하는 P2P 통신이나 데이터 동기화 등의 문제를 푸는 공용 라이브러리입니다.
0.7 버전에서는 Libplanet의 안정성 및 성능 개선과 더불어 다양한 사용성 개선이 있었습니다. 이 글에서는 0.7 버전의 주요 변경 사항들에 대해 다루겠습니다.
액션 및 상태의 타입 제한 기존 Libplanet에서 상태 및 액션의 속성은 object 타입으로 표현되고 저장할 때는 알아서 .|"><meta name=twitter:image:src content><meta name=twitter:domain content="https://snack.planetarium.dev/kor/2019/11/libplanet-0.7/"><title>Libplanet 0.7 릴리스</title>
<link rel=canonical href=https://snack.planetarium.dev/kor/2019/11/libplanet-0.7/><link rel=alternate href=https://snack.planetarium.dev/eng/2019/11/libplanet-0.7/ hreflang title="Libplanet 0.7 Released"><link href=https://snack.planetarium.dev/index.xml rel=alternate type=application/atom+xml title="Libplanet 0.7 릴리스"><link rel=stylesheet href=https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css><link rel=stylesheet href=https://snack.planetarium.dev/css/style.min.1a35efb5c5da4fd20bd2ec86458da5ee7cc1cfc81c4f107944b5e0fc59a3d809.css integrity="sha256-GjXvtcXaT9IL0uyGRY2l7nzBz8gcTxB5RLXg/Fmj2Ak="><script async src="https://www.googletagmanager.com/gtag/js?id=UA-132504786-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-132504786-2")</script><link rel=icon href=/favicon-32x32.png type=image/png sizes=32x32><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/apple-touch-icon.png></head><body class="sans-serif w-90 w-60-ns center center-ns mv2 mv5-ns" itemscope itemtype=http://schema.org/Article><a href=https://snack.planetarium.dev/kor/ id=site-title class="b bb bw1 pb1 no-underline dark-gray">플라네타리움 엔지니어링 스낵</a><section id=main class=mt5><h1 itemprop=name id=title class=mb1>Libplanet 0.7 릴리스</h1><div class="f6 gray dib-ns"><time itemprop=datePublished datetime=2019-11-11>2019년 11월 11일
</time>(<strong>한국어</strong>
&bull;
<a href=https://snack.planetarium.dev/eng/2019/11/libplanet-0.7/ hreflang title="Libplanet 0.7 Released" class=gray>English</a>)</div><article itemprop=articleBody id=content class="w-100 lh-copy"><p>안녕하세요. 저희 팀은 <a href=https://libplanet.io/>Libplanet</a>의 일곱 번째 마이너 버전인 <a href=https://github.com/planetarium/libplanet/releases/tag/0.7.0>0.7 버전</a>을 릴리스했습니다.</p><p>Libplanet은 분산 P2P로 돌아가는 온라인 멀티플레이어 게임을 만들 때, 그러한 게임들이 매번 구현해야 하는 P2P 통신이나 데이터 동기화 등의 문제를 푸는 공용 라이브러리입니다.</p><p>0.7 버전에서는 Libplanet의 안정성 및 성능 개선과 더불어 다양한 사용성 개선이 있었습니다. 이 글에서는 0.7 버전의 주요 변경 사항들에 대해 다루겠습니다.</p><h2 id=액션-및-상태의-타입-제한>액션 및 상태의 타입 제한</h2><p>기존 Libplanet에서 상태 및 액션의 속성은 <code>object</code> 타입으로 표현되고 저장할 때는 알아서 <a href=https://docs.microsoft.com/en-us/dotnet/standard/serialization/binary-serialization>.NET의 바이너리 직렬화</a> 포맷으로 직렬화되었습니다. 이 방식은 .NET 객체를 그대로 직렬화할 수 있으므로 Libplanet을 쓰는 쪽에서도 만드는 쪽에서도 생각할 게 적다는 장점이 있습니다. 하지만 저희 팀은 이 방식을 처음 도입했을 때부터 여러 한계를 인식한 채 한시적으로 사용할 것을 의도했는데, 그 한계는 다음과 같은 것들이 있습니다.</p><ul><li>직렬화 역직렬화가 구체적으로 이뤄지는 방식이 암시적입니다. 타입의 구현이 달라지면 직렬화되는 포맷에도 영향이 가지만 구체적으로 어떤 변화가 일어나는지 짐작하기 어렵습니다.</li><li>과거에는 모양이 달랐던 타입의 값이 직렬화되어 블록체인에 저장된 뒤, 현재 타입으로 역직렬화를 시도했을 때 런타임 오류가 나거나 의도한 것과 다른 의미로 해석될 수 있습니다.</li><li>팀에서 정의한 타입이라면 <a href=https://docs.microsoft.com/en-us/dotnet/standard/serialization/version-tolerant-serialization>VTS</a> 같은 기법을 도입할 수도 있지만, 실수로 팀에서 만든 어셈블리가 아닌 패키지 등을 통해 가져다 쓴 타입이 섞여서 직렬화된 경우 나중에 해당 타입의 내부 표현이 달라져서 직렬화 형식이 바뀌어도 대응하기가 어렵습니다.</li><li>직렬화된 결과를 .NET이 아닌 플랫폼에서 해석하기 어려울뿐더러, 같은 .NET 플랫폼이라도 직렬화된 타입을 포함한 어셈블리를 공유하지 않으면 역직렬화는 어렵습니다. 따라서 <a href=https://github.com/planetarium/libplanet-explorer>Libplanet Explorer</a>나 <a href=https://docs.microsoft.com/en-us/dotnet/standard/serialization/version-tolerant-serialization>Libplanet Explorer Frontend</a> 같은 앱에서 액션의 속성이나 특정 시점의 상태를 사람이 보기 쉽게 표시하기 힘듭니다.</li></ul><p>그래서 이번 버전부터는 상태 및 액션의 속성은 <a href=https://github.com/planetarium/bencodex.net>Bencodex</a>의 <a href=https://github.com/planetarium/bencodex.net/blob/0.2.0/Bencodex/Types/IValue.cs><code>IValue</code></a> 타입을 통해서 표현하도록 바뀌었습니다. 따라서 게임 내부에서 정의해서 쓰는 타입들을 <code>IValue</code> 형식으로 변환하는 코드, 그리고 <code>IValue</code> 형식으로 표현된 것을 다시 게임 내 타입들로 해석하는 코드를 명시적으로 써야 합니다. 조금 귀찮아진 것도 사실이지만, 대신 직렬화하려는 타입의 내부 표현이 바뀌어도 직렬화 혹은 역직렬화 메서드에 해당 변경에 따른 처리 로직을 추가할 수 있게 되었고, 각기 다른 버전 사이의 호환을 좀 더 구현하기 쉽게 되었습니다.</p><h2 id=blockchaint의-ireadonlylistt-구현-제거><code>BlockChain&lt;T></code>의 <code>IReadOnlyList&lt;T></code> 구현 제거</h2><p>이전 버전까지 <code>BlockChain&lt;T></code> 클래스는 <code>IReadOnlyList&lt;T></code> 인터페이스를 구현하고 있었고, 그에 따라 <code>BlockChain&lt;T></code> 객체에 직접 <a href=https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/linq/>LINQ</a> 확장 메서드들을 사용할 수 있었습니다. LINQ 확장 메서드는 선형적인 객체를 다룰 때 다양한 편리를 제공하지만, 사용 방법에 따라 상당한 성능상의 차이를 가져올 수 있습니다. 예를 들어 <code>BlockChain&lt;T></code> 객체에 10,000개의 블록이 있을 때 LINQ의 <code>.Last()</code> 메서드를 사용하여 10,000 번째 블록을 가져오고자 한다면 마지막 블록만을 저장소에서 바로 가져온다고 생각하기 쉽습니다. 하지만 실제로는 <code>BlockChain&lt;T></code>의 첫 블록부터 마지막 블록까지 조회하며 각 블록에 대해 스토리지에 저장된 내용을 메모리에 올리고 해석하는 작업이 이뤄지게 됩니다. 저장된 블록이 적을 때는 이런 점이 큰 문제가 되지 않지만, 블록이 많아질수록 이런 사용방식이 큰 성능 문제로 이어질 수 있습니다.</p><p>이번 버전부터는 <code>BlockChain&lt;T></code> 클래스에서 <code>IReadOnlyList&lt;T></code> 구현을 아예 제거함으로써 LINQ 확장 메서드를 잘못 사용해 생길 수 있는 문제를 방지하도록 했습니다. 대신 <a href=https://docs.libplanet.io/0.7.0/api/Libplanet.Blockchain.BlockChain-1.html#Libplanet_Blockchain_BlockChain_1_Contains_Libplanet_Blocks_Block__0__><code>BlockChain&lt;T>.Contains()</code></a> 같이 자주 쓰이는 연산은 효율적인 구현을 직접 제공하기로 했습니다.</p><h2 id=개인키를-안전하게-저장할-수-있는-키-저장소-구현>개인키를 안전하게 저장할 수 있는 키 저장소 구현</h2><p>이번 버전에서는 개인키를 암호화하여 안전하게 보호할 수 있도록 키 저장소가 추가되었습니다. 키 저장소 내 각각의 키 파일은 <a href=https://docs.libplanet.io/0.7.0/api/Libplanet.KeyStore.ProtectedPrivateKey.html><code>ProtectedPrivateKey</code></a> 클래스로 표현되며, 사용자가 입력한 암호(passphrase)로 개인키를 암호화 하여 저장할 수 있습니다. 또한, <a href=https://docs.libplanet.io/0.7.0/api/Libplanet.KeyStore.ProtectedPrivateKey.html#Libplanet_KeyStore_ProtectedPrivateKey_WriteJson_Stream_System_Nullable_Guid___><code>ProtectedPrivateKey.WriteJson()</code></a> 메서드를 이용해 <a href=https://en.wikipedia.org/wiki/Ethereum>이더리움</a>의 <a href=https://github.com/ethereum/wiki/wiki/Web3-Secret-Storage-Definition>Web3 Secret Storage Definition</a>에 따라 JSON 형식으로 저장할 수 있습니다. 추후 키 저장소 디렉터리를 통합적으로 관리하는 기능도 추가될 예정입니다.</p><p>현재 <a href=https://en.wikipedia.org/wiki/Key_derivation_function>키 유도함수</a>는 <a href=https://en.wikipedia.org/wiki/PBKDF2>PBKDF2</a>와 <a href=https://en.wikipedia.org/wiki/Scrypt>Scrypt</a>가 구현되어있고, <a href=https://ko.wikipedia.org/wiki/%EA%B3%A0%EA%B8%89_%EC%95%94%ED%98%B8%ED%99%94_%ED%91%9C%EC%A4%80>AES</a>-128-<a href=https://ko.wikipedia.org/wiki/%EB%B8%94%EB%A1%9D_%EC%95%94%ED%98%B8_%EC%9A%B4%EC%9A%A9_%EB%B0%A9%EC%8B%9D#%EC%B9%B4%EC%9A%B4%ED%84%B0_(CTR)>CTR</a> 암호화 알고리즘을 지원하고 있습니다. 이 중 Scrypt 구현은 <a href=https://github.com/minhoryang>minhoryang</a> 님의 <a href=https://github.com/planetarium/libplanet/pull/654>기여</a>로 추가되었습니다. 🎉</p><h2 id=그-외>그 외</h2><p>이번 버전에는 <a href=https://hacktoberfest.digitalocean.com/>Hacktoberfest</a> 행사로 많은 분의 기여가 있었습니다. 해당 행사에 관한 내용은 문성원 님이 작성하신 <a href=/kor/2019/11/looking-back-at-hacktoberfest/>Hacktoberfest를 돌아보며</a>에서 자세히 보실 수 있고, 그 외 이번 버전의 모든 변경 사항은 <a href=https://github.com/planetarium/libplanet/releases/tag/0.7.0>전체 변경 내용</a>에서 확인하실 수 있습니다.</p><p>이번 변경 사항이나 Libplanet에 대해 궁금한 점이 있으시다면 언제든 저희 팀이 상주해 있는 <a href=https://discord.gg/planetarium>디스코드 대화방</a>에 방문해 주세요!</p></article><script>(function(){if(!location.hash.match(/^#/))return;var t,n,s,a,o=document.getElementById("content"),r=window.decodeURIComponent(location.hash.substring(1)),i=document.getElementById(r),e=i.nodeName.match(/^H([123456])$/);if(!e||i.parentNode!==o)return;for(a=window.parseInt(e[1]),t=!1,s=0;s<o.childNodes.length;s++)n=o.childNodes[s],t?(e=n.nodeName.match(/^H([123456])$/),e&&window.parseInt(e[1])>=a&&(t=!1)):n===i&&(t=!0),!t&&!n.nodeName.match(/^#/)&&(n.className+=" dim")})()</script><div class=recruit><a href=https://planetariumhq.com>플라네타리움</a>은 게임에 특화된
오픈 소스 P2P 라이브러리 <a href=https://libplanet.io/>Libplanet</a>과,
그 위에서 중앙 서버 없는 온라인 게임
〈<a href=https://nine-chronicles.com/>나인 크로니클</a>〉을 만들고
있습니다. 저희와 흥미로운 기술적 도전을 함께 하실 분들을 모시고 있습니다.
지금 <a href=https://recruit.planetariumhq.com/>인재 영입 페이지</a>를
확인해주세요!</div><div itemprop=author class="fl tc mr3"><a href=https://github.com/earlbread rel=author itemprop=url class="no-underline mid-gray b f6"><img src="https://www.gravatar.com/avatar/b1267859758f31ce5f6db0af2042e846?d=https://avatars.githubusercontent.com/earlbread" itemprop=image class="w3 h3 br-100 mb1"><br>이승훈</a></div></section><footer><div><p class="f6 gray mt6 lh-copy">&copy; 2019&ndash;2023
<a href=https://planetariumlabs.com/ style=color:inherit;text-decoration:inherit>Planetarium</a>.</p></div></footer></body></html>