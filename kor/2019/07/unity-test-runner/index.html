<!doctype html><html lang=ko prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<meta name=description content>
<meta name=HandheldFriendly content="True">
<meta name=MobileOptimized content="320">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=keywords content>
<meta property="og:type" content="article">
<meta property="og:description" content>
<meta property="og:title" content="Unity 테스트 러너 도입기">
<meta property="og:site_name" content="플라네타리움 엔지니어링 스낵">
<meta property="og:image" content="https://snack.planetarium.dev/kor/2019/07/unity-test-runner/test-result.png">
<meta property="og:image" content="https://snack.planetarium.dev/kor/2019/07/unity-test-runner/tests-asmdef.png">
<meta property="og:image" content="https://snack.planetarium.dev/kor/2019/07/unity-test-runner/unity-platform.png">
<meta property="og:image" content="https://snack.planetarium.dev/og/kor.png">
<meta property="og:url" content="https://snack.planetarium.dev/kor/2019/07/unity-test-runner/">
<meta property="og:locale" content="ko">
<meta property="article:published_time" content="2019-07-12">
<meta property="article:modified_time" content="2019-07-12">
<meta name=twitter:card content="summary">
<meta name=twitter:site content="@">
<meta name=twitter:creator content="@">
<meta name=twitter:title content="Unity 테스트 러너 도입기 | 플라네타리움 엔지니어링 스낵">
<meta name=twitter:description content="안녕하세요. 플라네타리움 개발팀 양천웅입니다. 오늘은 Unity 테스트 러너 도입 시도에 대한 경험담을 얘기하려 합니다.
들어가기 전에 현재 저는 Libplanet과 Unity를 사용해 블록체인 게임 개발을 하고 있습니다. 팀에 합류한 이후 Unity로 게임을 만든다는 얘기가 나왔을 때는 막연히 &lsquo;GUI 프로그래밍 경험이 없는 것도 아니고, 게임도 GUI 프로그래밍하듯이 하면 되겠지&rsquo;라는 근거 없는 자신감을 가지고 시작했습니다.
처음 프로젝트를 시작했을 때는 일정과 Unity에 대한 이해도가 부족한 상황이라 테스트를 포기하고 작업을 진행했지만, 시간이 지날수록 테스트 도입에 대한 필요성이 커졌고 그때 발견한 것이 Unity 테스트 러너였습니다.|">
<meta name=twitter:image:src content>
<meta name=twitter:domain content="https://snack.planetarium.dev/kor/2019/07/unity-test-runner/">
<title>Unity 테스트 러너 도입기</title>
<link rel=canonical href=https://snack.planetarium.dev/kor/2019/07/unity-test-runner/>
<link rel=alternate href=https://snack.planetarium.dev/eng/2019/07/unity-test-runner/ hreflang=en title="Experiencing Unity Test Runner">
<link href=https://snack.planetarium.dev/index.xml rel=alternate type=application/atom+xml title="Unity 테스트 러너 도입기">
<link rel=stylesheet href=https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css>
<link rel=stylesheet href=https://snack.planetarium.dev/css/style.min.e1d6437358a5772f79ae0fd01e6ee2736e7fc6536065652581cf2a9c461d4bb0.css integrity="sha256-4dZDc1ildy95rg/QHm7ic25/xlNgZWUlgc8qnEYdS7A=">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-132504786-2"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-132504786-2')</script>
<link rel=icon href=/favicon-32x32.png type=image/png sizes=32x32>
<link rel="shortcut icon" href=/favicon.ico type=image/x-icon>
<link rel=apple-touch-icon href=/apple-touch-icon.png>
</head>
<body class="sans-serif w-90 w-60-ns center center-ns mv2 mv5-ns" itemscope itemtype=http://schema.org/Article>
<a href=https://snack.planetarium.dev/kor/ id=site-title class="b bb bw1 pb1 no-underline dark-gray">플라네타리움 엔지니어링 스낵</a>
<section id=main class=mt5>
<h1 itemprop=name id=title class=mb1>Unity 테스트 러너 도입기</h1>
<div class="f6 gray dib-ns">
<time itemprop=datePublished datetime=2019-07-12>
2019년 7월 12일
</time>
(<strong>한국어</strong>
&bull;
<a href=https://snack.planetarium.dev/eng/2019/07/unity-test-runner/ hreflang=en title="Experiencing Unity Test Runner" class=gray>English</a>)
</div>
<article itemprop=articleBody id=content class="w-100 lh-copy">
<p>안녕하세요. 플라네타리움 개발팀 양천웅입니다. 오늘은 <a href=https://docs.unity3d.com/Manual/testing-editortestsrunner.html>Unity 테스트 러너</a> 도입 시도에 대한 경험담을 얘기하려 합니다.</p>
<h2 id=들어가기-전에>들어가기 전에</h2>
<p>현재 저는 <a href=https://github.com/planetarium/libplanet.net>Libplanet</a>과 Unity를 사용해 블록체인 게임 개발을 하고 있습니다. 팀에 합류한 이후 Unity로 게임을 만든다는 얘기가 나왔을 때는 막연히 &lsquo;GUI 프로그래밍 경험이 없는 것도 아니고, 게임도 GUI 프로그래밍하듯이 하면 되겠지&rsquo;라는 근거 없는 자신감을 가지고 시작했습니다.<br>
처음 프로젝트를 시작했을 때는 일정과 Unity에 대한 이해도가 부족한 상황이라 테스트를 포기하고 작업을 진행했지만, 시간이 지날수록 테스트 도입에 대한 필요성이 커졌고 그때 발견한 것이 Unity 테스트 러너였습니다.</p>
<p>Unity 테스트 러너는 Unity에서 자체적으로 제공하는 테스트 도구입니다. <a href=https://nunit.org/>NUnit</a> 기반의 테스트를 작성 후, 플레이 모드와 에디트 모드 각각에 테스트 환경을 구축하여<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> Unity 에디터에서 테스트를 실행할 수 있습니다.</p>
<h2 id=어셈블리-정의-파일-assembly-definition-files>어셈블리 정의 파일 (assembly definition files)</h2>
<p>처음 문서를 보며 테스트 스크립트를 만들었는데 문제를 만났습니다. 다른 라이브러리들은 정상적으로 인식이 되는데, 정작 테스트를 해야 하는 게임 코드의 네임스페이스를 인식 못 하는 것이었습니다.
원인은 Unity 에디터 실행 시 자동으로 인식되는 <em>Assembly-CSharp.dll</em>과 다르게, 테스트 스크립트 안에서는 게임 프로젝트의 스크립트를 인식 못 하기 때문이었습니다.</p>
<figure><img src=tests-asmdef.png alt="Tests.asmdef에 의존성을 추가"><figcaption>
<p><em>Tests.asmdef</em>에 의존성을 추가</p>
</figcaption>
</figure>
<p>프로젝트 스크립트를 정의한 어셈블리 정의 파일을 만든 뒤 테스트용으로 정의된 어셈블리 정의 파일<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>에 의존성을 추가해주면 문제가 해결됩니다.</p>
<p>자세한 내용은 <a href=https://docs.unity3d.com/kr/current/Manual/ScriptCompilationAssemblyDefinitionFiles.html>관련 문서</a>를 참고해주세요.</p>
<h2 id=어셈블리-정의-파일의-플랫폼-설정>어셈블리 정의 파일의 플랫폼 설정</h2>
<p>어셈블리 정의 파일을 생성한 후에도 문제가 있었는데, 에디터에서는 정상적으로 작동하는 서드파티 라이브러리가 프로젝트 빌드 시에 인식이 안 되면서 깨지는 문제였습니다.
라이브러리가 Unity 에디터의 확장 기능을 제공하는 경우가 있는데, 어셈블리 정의 파일이 에디터용 기능을 빌드에 포함하려다 발생하는 문제였습니다.</p>
<figure><img src=unity-platform.png alt="허용 플랫폼을 에디터만 체크"><figcaption>
<p>허용 플랫폼을 에디터만 체크</p>
</figcaption>
</figure>
<p>해결 방법은 간단한데, 해당 라이브러리의 <em>Editor</em> 폴더 내부에 에디터용 정의 파일을 따로 생성 후, 플랫폼 설정의 <em>Include Platforms</em> 설정을 <em>Editor</em>만 허용하도록 변경하는 것입니다.</p>
<h2 id=테스트-실행>테스트 실행</h2>
<p>준비가 끝났다면 이제 테스트를 작성하고 에디터에서 실행해보면 됩니다. 결과는 테스트 러너 창에서 바로 확인이 가능합니다.</p>
<figure><img src=test-result.png alt="테스트 실행 결과"><figcaption>
<p>테스트 실행 결과</p>
</figcaption>
</figure>
<p>현재 프로젝트에서도 아직은 테스트가 붙어있지 않은 코드가 더 많지만, Unity 테스트 러너를 도입한 이후에는 가능하면 버그 수정이나 새로운 기능 추가 시 테스트를 함께 작성하고 있으며, 덕분에 매번 게임을 실행해서 확인해야 했던 연출이나 로직 확인에 많은 시간을 줄일 수 있었습니다.<br>
Unity를 사용하는 다른 프로젝트에서도 기회가 될 때 도입한다면, 생산성 향상에 많은 도움이 될 것으로 생각합니다. 감사합니다!</p>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>심지어 플레이 모드 테스트는 해당 플랫폼용으로 빌드된 플레이어로 알아서 빌드 후 실행까지 가능합니다.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
<li id=fn:2 role=doc-endnote>
<p>에디터에서 테스트 러너 생성 시 별도 설정을 하지 않았다면 <em>Assets/Tests/Test.asmdef</em>로 생성됩니다.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</article>
<script>(function(){var d,h,e,a,g,c,f,b;if(!location.hash.match(/^#/))return;if(d=document.getElementById('content'),h=window.decodeURIComponent(location.hash.substring(1)),e=document.getElementById(h),a=e.nodeName.match(/^H([123456])$/),!a||e.parentNode!==d)return;g=window.parseInt(a[1]),c=!1;for(f=0;f<d.childNodes.length;f++)b=d.childNodes[f],c?(a=b.nodeName.match(/^H([123456])$/),a&&window.parseInt(a[1])>=g&&(c=!1)):b===e&&(c=!0),!c&&!b.nodeName.match(/^#/)&&(b.className+=' dim')})()</script>
<div class=recruit>
<a href=https://planetariumhq.com>플라네타리움</a>은 게임에 특화된 오픈 소스 P2P 라이브러리 <a href=https://libplanet.io/>Libplanet</a>과, 그 위에서 중앙 서버 없는 온라인 게임 <a href=https://nine-chronicles.com/>나인 크로니클</a>을 만들고 있습니다. 저희와 흥미로운 기술적 도전을 함께 하실 분들을 모시고 있습니다. 지금 <a href=https://recruit.planetariumhq.com/>채용 페이지</a>를 확인해주세요!
</div>
<div itemprop=author class="fl tc mr3">
<a href=https://github.com/ipdae rel=author itemprop=url class="no-underline mid-gray b f6">
<img src="https://www.gravatar.com/avatar/90bb923f49732620a2624a6b633b32bc?d=https://avatars.githubusercontent.com/ipdae" itemprop=image class="w3 h3 br-100 mb1">
<br>양천웅
</a>
</div>
</section>
<footer>
<div>
<p class="f6 gray mt6 lh-copy">
&copy; 2019&ndash;2021
<a href=https://planetariumhq.com/ style=color:inherit;text-decoration:inherit>Planetarium</a>.
</p>
</div>
</footer>
</body>
</html>