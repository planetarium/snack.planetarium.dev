<!doctype html><html lang=ko prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=description content><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content><meta property="og:type" content="article"><meta property="og:description" content><meta property="og:title" content="Libplanet 0.8 릴리스"><meta property="og:site_name" content="플라네타리움 엔지니어링 스낵"><meta property="og:url" content="https://snack.planetarium.dev/kor/2020/02/libplanet-0.8/"><meta property="og:locale" content="ko"><meta property="article:published_time" content="2020-02-05"><meta property="article:modified_time" content="2020-02-05"><meta name=twitter:card content="summary"><meta name=twitter:site content="@"><meta name=twitter:creator content="@"><meta name=twitter:title content="Libplanet 0.8 릴리스 | 플라네타리움 엔지니어링 스낵"><meta name=twitter:description content="안녕하세요.
저희 팀은 Libplanet의 여덟 번째 마이너 버전인 0.8 버전을
릴리스했습니다.
Libplanet은 분산 P2P로 돌아가는 온라인 멀티플레이어 게임을 만들 때,
그러한 게임들이 매번 구현해야 하는 P2P 통신이나 데이터 동기화 등의 문제를 푸는
공용 라이브러리입니다.
거의 세 달 만의 새 버전인 만큼, 0.8 버전에서는 저장소 최적화를 비롯한 많은
개선이 있었습니다.
이 글에서는 0.8 버전의 주요 변경 사항들에 대해 다루겠습니다.
제너시스 블록 상정
BlockChain<T>는 이제 특정한 제너시스 블록을 상정하게 되었습니다.
이는 Libplanet으로 만든 여러 게임들이 서로 별개의 네트워크를 구성함에도,
Libplanet이 일종의 메타프로토콜로 동작하기에 엉뚱한 네트워크에 접속 시도를
하는 등의 실수를 방지하기 위해서 입니다.|"><meta name=twitter:image:src content><meta name=twitter:domain content="https://snack.planetarium.dev/kor/2020/02/libplanet-0.8/"><title>Libplanet 0.8 릴리스</title>
<link rel=canonical href=https://snack.planetarium.dev/kor/2020/02/libplanet-0.8/><link rel=alternate href=https://snack.planetarium.dev/eng/2020/02/libplanet-0.8/ hreflang=en title="Libplanet 0.8 Released"><link href=https://snack.planetarium.dev/index.xml rel=alternate type=application/atom+xml title="Libplanet 0.8 릴리스"><link rel=stylesheet href=https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css><link rel=stylesheet href=https://snack.planetarium.dev/css/style.min.1a35efb5c5da4fd20bd2ec86458da5ee7cc1cfc81c4f107944b5e0fc59a3d809.css integrity="sha256-GjXvtcXaT9IL0uyGRY2l7nzBz8gcTxB5RLXg/Fmj2Ak="><script async src="https://www.googletagmanager.com/gtag/js?id=UA-132504786-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-132504786-2")</script><link rel=icon href=/favicon-32x32.png type=image/png sizes=32x32><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/apple-touch-icon.png></head><body class="sans-serif w-90 w-60-ns center center-ns mv2 mv5-ns" itemscope itemtype=http://schema.org/Article><a href=https://snack.planetarium.dev/kor/ id=site-title class="b bb bw1 pb1 no-underline dark-gray">플라네타리움 엔지니어링 스낵</a><section id=main class=mt5><h1 itemprop=name id=title class=mb1>Libplanet 0.8 릴리스</h1><div class="f6 gray dib-ns"><time itemprop=datePublished datetime=2020-02-05>2020년 2월 5일
</time>(<strong></strong>
&bull;
<a href=https://snack.planetarium.dev/eng/2020/02/libplanet-0.8/ hreflang=en title="Libplanet 0.8 Released" class=gray>English</a>)</div><article itemprop=articleBody id=content class="w-100 lh-copy"><p>안녕하세요.
저희 팀은 <a href=https://libplanet.io/>Libplanet</a>의 여덟 번째 마이너 버전인 <a href=https://github.com/planetarium/libplanet/releases/tag/0.8.0>0.8 버전</a>을
릴리스했습니다.</p><p>Libplanet은 분산 P2P로 돌아가는 온라인 멀티플레이어 게임을 만들 때,
그러한 게임들이 매번 구현해야 하는 P2P 통신이나 데이터 동기화 등의 문제를 푸는
공용 라이브러리입니다.</p><p>거의 세 달 만의 새 버전인 만큼, 0.8 버전에서는 저장소 최적화를 비롯한 많은
개선이 있었습니다.
이 글에서는 0.8 버전의 주요 변경 사항들에 대해 다루겠습니다.</p><h2 id=제너시스-블록-상정>제너시스 블록 상정</h2><p><code>BlockChain&lt;T></code>는 이제 특정한 제너시스 블록을 상정하게 되었습니다.
이는 Libplanet으로 만든 여러 게임들이 서로 별개의 네트워크를 구성함에도,
Libplanet이 일종의 메타프로토콜로 동작하기에 엉뚱한 네트워크에 접속 시도를
하는 등의 실수를 방지하기 위해서 입니다.</p><p><a href=https://docs.libplanet.io/0.8.0/api/Libplanet.Blockchain.BlockChain-1.html#Libplanet_Blockchain_BlockChain_1__ctor_Libplanet_Blockchain_Policies_IBlockPolicy__0__Libplanet_Store_IStore_Libplanet_Blocks_Block__0__><code>BlockChain&lt;T>()</code> 생성자</a>는 <code>Block&lt;T></code> 객체를 인자로 받으며,
해당 블록이 가장 첫 블록이 됩니다. 만약 <code>IStore</code>에 들어있는 제너시스 블록과
<code>BlockChain&lt;T>()</code> 생성자가 기대하는 제너시스 블록이 일치하지 않을 경우
<a href=https://docs.libplanet.io/0.8.0/api/Libplanet.Blocks.InvalidGenesisBlockException.html><code>InvalidGenesisBlockException</code></a>이 일어나게
됩니다.</p><p>현재는 생성자가 제너시스 <code>Block&lt;T></code> 객체를 통째로 받지만,
<a href=https://github.com/planetarium/libplanet/pull/769>다음 버전에는 제너시스 블록 해시만 받고 실제 블록 내용은 네트워크의 다른
노드한테 받을 수도 있게 개선될 예정입니다.</a></p><h2 id=defaultstoredefaultstore--litedbstore><a href=https://docs.libplanet.io/master/api/Libplanet.Store.DefaultStore.html><code>DefaultStore</code></a> ← <code>LiteDBStore</code></h2><p>내장 <code>IStore</code> 구현이었던 <code>LiteDBStore</code>가 사라지고 그 자리를
<a href=https://docs.libplanet.io/master/api/Libplanet.Store.DefaultStore.html><code>DefaultStore</code></a>가 대체했습니다.</p><p>이름이 바뀐 까닭은 더이상 LiteDB 파일 하나가 아닌,
여러 포맷이 섞인 파일들을 담는 디렉터리에 저장되게 바뀌었기 때문입니다.</p><p>또한, 1.0.0 릴리스 전까지 실험을 거듭하여 저장소 최적화를 할 예정으로,
이름에서 구현 세부 사항을 제거하는 의도도 있었습니다.</p><p>그 외에도 저장 공간을 줄이기 위한 <a href=https://docs.libplanet.io/master/api/Libplanet.Store.DefaultStore.html#Libplanet_Store_DefaultStore__ctor_System_String_System_Boolean_System_Boolean_System_Int32_System_Int32_System_Int32_System_Int32_System_Boolean_System_Boolean_><code>DefaultStore()</code> 생성자</a>에는
<code>compress</code> 옵션이 생겼습니다. 이번 버전에서는 아직 기본적으로 꺼져 있지만,
다음 버전에서는 기본값이 <code>true</code>로 바뀔 예정입니다.</p><h2 id=icryptobackendicryptobackend><a href=https://docs.libplanet.io/0.8.0/api/Libplanet.Crypto.ICryptoBackend.html><code>ICryptoBackend</code></a></h2><p>Libplanet은 다양한 플랫폼에서도 쓸 수 있도록,
순수 C#으로 작성된 암호학 라이브러리인 <a href=http://www.bouncycastle.org/csharp/>Bouncy Castle</a>을 써왔습니다.
그러나 순수 C# 구현은 이식성에서는 큰 장점이 되지만,
성능에서는 오히려 페널티로 작용합니다.</p><p>새 버전에서는 이식성과 성능 중 어느 쪽을 취할지 게임 제작자가 고를 수 있도록,
<a href=https://docs.libplanet.io/0.8.0/api/Libplanet.Crypto.ICryptoBackend.html><code>ICryptoBackend</code></a>라는 추상화 계층이 추가됐습니다.
기본 구현인 <a href=https://docs.libplanet.io/0.8.0/api/Libplanet.Crypto.DefaultCryptoBackend.html><code>DefaultCryptoBackend</code></a>는 여전히
내부적으로 Bouncy Castle에 의존하지만,
게임 제작자는 게임의 타깃 플랫폼에 따라 적절히 <code>ICryptoBackend</code> 인터페이스를
구현하여 성능 이점을 누릴 수 있습니다.</p><p>예를 들어, Libplanet이 <code>ICryptoBackend</code>를 구현한 <code>MyCryptoBackend</code> 클래스를
쓰게 하고 싶다면,
아래와 같이 <a href=https://docs.libplanet.io/0.8.0/api/Libplanet.Crypto.CryptoConfig.html#Libplanet_Crypto_CryptoConfig_CryptoBackend><code>CryptoConfig.CryptoBackend</code> 속성</a>를
덮어씌우면 됩니다.</p><div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-csharp data-lang=csharp><span style=display:flex><span>CryptoConfig.CryptoBackend = <span style=color:#080;font-weight:700>new</span> MyCryptoBackend();
</span></span></code></pre></div><p>저희 팀에서 만드는 게임인 <a href=https://nine-chronicles.com/>나인 크로니클</a>에서는 비트코인 프로젝트에서 공개한
<a href=https://github.com/bitcoin-core/secp256k1>secp256k1</a> C 라이브러리를 호출하는 <code>ICryptoBackend</code> 인터페이스를 구현하여
게임 성능을 개선하기도 했습니다.</p><h2 id=라우팅-테이블-개선>라우팅 테이블 개선</h2><p>Libplanet은 <a href=https://snack.planetarium.dev/kor/2019/09/kademlia/>분산 해시 테이블 방식</a>을 적용하여 다른 피어와 통신하기 때문에
라우팅 테이블의 자신과 연결된 피어들의 정보를 저장합니다.</p><p>기존에는 이 라우팅 테이블에 해당 피어와 가장 최근에 통신한 시점만을
저장하고 있었는데,
추가로 해당 피어와의 통신 딜레이를 추가하여 사용자가 네트워크 환경에 대한
자세한 정보를 알 수 있도록 하였습니다.</p><p>개발자들은 새로 추가된
<a href=https://docs.libplanet.io/0.8.0/api/Libplanet.Net.Swarm-1.html#Libplanet_Net_Swarm_1_CheckAllPeersAsync_System_Nullable_TimeSpan__CancellationToken_><code>Swarm&lt;T>.CheckAllPeersAsync()</code> 메서드</a>를
이용하여 라우팅 테이블에 저장된 피어들을 갱신할 수 있고,
<a href=https://docs.libplanet.io/0.8.0/api/Libplanet.Net.Swarm-1.html#Libplanet_Net_Swarm_1_Peers><code>Swarm&lt;T>.Peers</code> 속성</a>에 접근해 Libplanet의 외부에서도 현재
자신의 라우팅 테이블에 들어있는 피어들을 확인할 수 있게 되었습니다.</p><h2 id=블록-구조-및-직렬화-방식의-변경>블록 구조 및 직렬화 방식의 변경</h2><p>블록체인을 구성하는 요소인 블록은 크게 트랜잭션을 제외한 메타데이터 부분과
트랜잭션, 이렇게 두 부분로 나눌 수 있습니다.</p><p>많은 블록체인 프로젝트들이 그렇듯 저희 역시 여기서 트랜잭션을 뺀
부분을 블록 헤더로 정의하였고,
기존에 블록 해시로만 수행하던 연산들을 좀더 풍부한 정보를 담은 블록 헤더를
이용해 수행하게 바꾸어 기존보다 효율적인 연산을 할 수 있게 되었습니다.</p><p>더불어, 블록과 트랜잭션을 직렬화할 때 필드 키를 짧게 줄이고,
비어있는 필드는 아예 배제함으로써 직렬화된 표현을 경량화했습니다.</p><h2 id=문서-개선>문서 개선</h2><p>라이브러리 자체의 변경은 아니지만, <a href=https://docs.libplanet.io/0.8.0/>문서 웹사이트</a>의 디자인에 개선이
있었고, 문성원 님이 작성하신 새로운 <a href=https://docs.libplanet.io/0.8.0/articles/overview.html>개요</a> 문서도 추가됐습니다.</p><h2 id=그-외>그 외</h2><p>그 밖에도, 세 달 남짓 Libplanet으로 만들고 있는 게임 <a href=https://nine-chronicles.com/>나인 크로니클</a>의
퍼블릭 테스트를 몇 차례 진행하며 발견한 많은 문제들을 바로잡느라 매우 다양한
변화가 있었습니다. 자세한 것은 <a href=https://github.com/planetarium/libplanet/releases/tag/0.8.0>전체 변경 내역</a>에서 확인할 수 있습니다.</p><p>호기심이 생기신 분들은 설치해서 이용해 보시고, 궁금한 점이 있으시다면 저희 팀이
상주해 있는 <a href=https://discord.gg/planetarium>디스코드</a>에 놀러오세요!</p></article><script>(function(){if(!location.hash.match(/^#/))return;var t,n,s,a,o=document.getElementById("content"),r=window.decodeURIComponent(location.hash.substring(1)),i=document.getElementById(r),e=i.nodeName.match(/^H([123456])$/);if(!e||i.parentNode!==o)return;for(a=window.parseInt(e[1]),t=!1,s=0;s<o.childNodes.length;s++)n=o.childNodes[s],t?(e=n.nodeName.match(/^H([123456])$/),e&&window.parseInt(e[1])>=a&&(t=!1)):n===i&&(t=!0),!t&&!n.nodeName.match(/^#/)&&(n.className+=" dim")})()</script><div class=recruit><a href=https://planetariumhq.com>플라네타리움</a>은 게임에 특화된
오픈 소스 P2P 라이브러리 <a href=https://libplanet.io/>Libplanet</a>과,
그 위에서 중앙 서버 없는 온라인 게임
〈<a href=https://nine-chronicles.com/>나인 크로니클</a>〉을 만들고
있습니다. 저희와 흥미로운 기술적 도전을 함께 하실 분들을 모시고 있습니다.
지금 <a href=https://recruit.planetariumhq.com/>인재 영입 페이지</a>를
확인해주세요!</div><div itemprop=author class="fl tc mr3"><a href=https://github.com/limebell rel=author itemprop=url class="no-underline mid-gray b f6"><img src="https://www.gravatar.com/avatar/e7b1079fc34b3ee9068d5d322aad9238?d=https://avatars.githubusercontent.com/limebell" itemprop=image class="w3 h3 br-100 mb1"><br>고찬혁</a></div><div itemprop=author class="fl tc mr3"><a href=https://github.com/dahlia rel=author itemprop=url class="no-underline mid-gray b f6"><img src="https://www.gravatar.com/avatar/03acbf60571d4ef2bf3741aecfa1b8cb?d=https://avatars.githubusercontent.com/dahlia" itemprop=image class="w3 h3 br-100 mb1"><br>홍민희</a></div></section><footer><div><p class="f6 gray mt6 lh-copy">&copy; 2019&ndash;2023
<a href=https://planetariumlabs.com/ style=color:inherit;text-decoration:inherit>Planetarium</a>.</p></div></footer></body></html>