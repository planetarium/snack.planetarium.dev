<!doctype html><html lang=ko prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge,chrome=1">
<meta name=description content>
<meta name=HandheldFriendly content="True">
<meta name=MobileOptimized content="320">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=keywords content>
<meta property="og:type" content="article">
<meta property="og:description" content>
<meta property="og:title" content="Serilog를 통해 애플리케이션 데이터를 수집하고 분석하자">
<meta property="og:site_name" content="플라네타리움 엔지니어링 스낵">
<meta property="og:image" content="https://snack.planetarium.dev/kor/2023/03/serilog/images/og.png">
<meta property="og:url" content="https://snack.planetarium.dev/kor/2023/03/serilog/">
<meta property="og:locale" content="ko">
<meta property="article:published_time" content="2023-03-03">
<meta property="article:modified_time" content="2023-03-03">
<meta name=twitter:card content="summary">
<meta name=twitter:site content="@">
<meta name=twitter:creator content="@">
<meta name=twitter:title content="Serilog를 통해 애플리케이션 데이터를 수집하고 분석하자 | 플라네타리움 엔지니어링 스낵">
<meta name=twitter:description content="들어가며 분산 네트워크나 마이크로서비스 아키텍처 상에서는 각 어플리케이션 간의 로그를 수집하고, 어플리케이션 간의 로그를 짝 맞춰야 할 일이 종종 있습니다. 이 글에서는 Serilog 와 S3를 이용하여 로그를 수집하고, 이를 Athena나 다른 로그 서치 엔진에 응용할 수 있는 방법을 안내하고자 합니다.
구조화 된 로그(Structured Log) 프로그래밍 경험이 좀 되신 분들이라면 구조화 된 로그에 대해 들어보셨을 것입니다. 구조화 된 로그는, 어떤 로그의 내용이 어떤 의미를 가지는지를 명확하게 표현하는 것을 말합니다. 예를 들어, 다음과 같은 로그가 있다고 가정해봅시다.|">
<meta name=twitter:image:src content>
<meta name=twitter:domain content="https://snack.planetarium.dev/kor/2023/03/serilog/">
<title>Serilog를 통해 애플리케이션 데이터를 수집하고 분석하자</title>
<link rel=canonical href=https://snack.planetarium.dev/kor/2023/03/serilog/>
<link href=https://snack.planetarium.dev/index.xml rel=alternate type=application/atom+xml title="Serilog를 통해 애플리케이션 데이터를 수집하고 분석하자">
<link rel=stylesheet href=https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css>
<link rel=stylesheet href=https://snack.planetarium.dev/css/style.min.1a35efb5c5da4fd20bd2ec86458da5ee7cc1cfc81c4f107944b5e0fc59a3d809.css integrity="sha256-GjXvtcXaT9IL0uyGRY2l7nzBz8gcTxB5RLXg/Fmj2Ak=">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-132504786-2"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-132504786-2')</script>
<link rel=icon href=/favicon-32x32.png type=image/png sizes=32x32>
<link rel="shortcut icon" href=/favicon.ico type=image/x-icon>
<link rel=apple-touch-icon href=/apple-touch-icon.png>
</head>
<body class="sans-serif w-90 w-60-ns center center-ns mv2 mv5-ns" itemscope itemtype=http://schema.org/Article>
<a href=https://snack.planetarium.dev/kor/ id=site-title class="b bb bw1 pb1 no-underline dark-gray">플라네타리움 엔지니어링 스낵</a>
<section id=main class=mt5>
<h1 itemprop=name id=title class=mb1>Serilog를 통해 애플리케이션 데이터를 수집하고 분석하자</h1>
<div class="f6 gray dib-ns">
<time itemprop=datePublished datetime=2023-03-03>
2023년 3월 3일
</time>
</div>
<article itemprop=articleBody id=content class="w-100 lh-copy">
<h1 id=들어가며>들어가며</h1>
<p>분산 네트워크나 마이크로서비스 아키텍처 상에서는 각 어플리케이션 간의 로그를 수집하고, 어플리케이션 간의 로그를 짝 맞춰야 할 일이 종종 있습니다.
이 글에서는 Serilog 와 S3를 이용하여 로그를 수집하고, 이를 Athena나 다른 로그 서치 엔진에 응용할 수 있는 방법을 안내하고자 합니다.</p>
<h1 id=구조화-된-로그structured-log>구조화 된 로그(Structured Log)</h1>
<p>프로그래밍 경험이 좀 되신 분들이라면 <a href="https://cloud.google.com/logging/docs/structured-logging?hl=ko">구조화 된 로그</a>에 대해 들어보셨을 것입니다.
구조화 된 로그는, 어떤 로그의 내용이 어떤 의미를 가지는지를 명확하게 표현하는 것을 말합니다.
예를 들어, 다음과 같은 로그가 있다고 가정해봅시다.</p>
<pre tabindex=0><code>2023-03-03 12:00:00.0000000 [INFO] [User] [suho.lee] [Login] [Success]
</code></pre><p>이 로그를 보면, 2021년 3월 3일 12시에 suho.lee라는 사용자가 로그인에 성공했다는 것을 알 수 있습니다.
하지만, 이 로그는 어떤 로그인인지, 어떤 서비스에서 로그인을 시도했는지, 로그인에 성공했는지 실패했는지 등의 정보를 알 수 없습니다.
이러한 로그는, 로그를 분석하거나, 로그를 수집하여 다른 시스템에 전달할 때, 어떤 로그인지, 어떤 서비스에서 로그인을 시도했는지 등의 정보를 알 수 없기 때문에, 의미가 없습니다.</p>
<p>때문에 로그를 구조화 된 로그로 작성하는 것이 중요합니다.
구조화 된 로그의 예시는 다음과 같습니다.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-json data-lang=json>{
  <span style=color:#b06;font-weight:700>&#34;timestamp&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;2023-03-03 12:00:00.0000000&#34;</span>,
  <span style=color:#b06;font-weight:700>&#34;level&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;INFO&#34;</span>,
  <span style=color:#b06;font-weight:700>&#34;service&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;User&#34;</span>,
  <span style=color:#b06;font-weight:700>&#34;user&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;suho.lee&#34;</span>,
  <span style=color:#b06;font-weight:700>&#34;action&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;Login&#34;</span>,
  <span style=color:#b06;font-weight:700>&#34;result&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;Success&#34;</span>
}
</code></pre></div><p>Serilog는 이런 형태의 구조화 된 로그를 쉽게 작성할 수 있도록 도와주는 라이브러리입니다.</p>
<h1 id=serilog>Serilog</h1>
<p>다른 언어와 마찬가지로, C#에서도 로그를 작성하는 라이브러리가 많이 있습니다.
Serilog는 이 중 하나입니다.
Serilog는 다음과 같은 특징을 가지고 있습니다.</p>
<ul>
<li>Sink를 통해 다양한 로그 저장소에 로그를 저장할 수 있습니다.</li>
<li>한 가지 로그에 대해 여러 표현법을 지원합니다.</li>
<li>로그를 작성하는 코드에 영향을 주지 않고, 로그를 수집하는 코드를 변경할 수 있습니다.</li>
</ul>
<h1 id=serilog를-이용한-로그-작성>Serilog를 이용한 로그 작성</h1>
<p>Serilog를 이용하여 로그를 작성하는 방법은 다음과 같습니다.</p>
<ol>
<li>Serilog 패키지를 설치합니다.</li>
</ol>
<pre tabindex=0><code>dotnet add package Serilog
</code></pre><ol start=2>
<li>Serilog를 초기화합니다.</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-csharp data-lang=csharp><span style=color:#888;font-weight:700>var</span> logger = <span style=color:#080;font-weight:700>new</span> LoggerConfiguration()
    .WriteTo.Console()
    .CreateLogger();
</code></pre></div><ol start=3>
<li>로그를 작성합니다.</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-csharp data-lang=csharp>logger.Information(<span style=color:#d20;background-color:#fff0f0>&#34;Hello, Serilog!&#34;</span>);
</code></pre></div><ol start=4>
<li>로그를 수집합니다.</li>
</ol>
<pre tabindex=0><code>2023-03-03 12:00:00.0000000 [INF] Hello, Serilog!
</code></pre><p>이렇게 Serilog를 이용하여 로그를 작성할 수 있습니다.</p>
<p>또한 이렇게 작성 된 로그를 구조화 된 로그로 작성할 수 있습니다.</p>
<ol>
<li>로그를 구조화 된 로그로 변경합니다.</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-csharp data-lang=csharp>logger.Information(<span style=color:#d20;background-color:#fff0f0>&#34;Hello, {name}!&#34;</span>, <span style=color:#d20;background-color:#fff0f0>&#34;Serilog&#34;</span>);
</code></pre></div><ol start=2>
<li>로그를 수집합니다.</li>
</ol>
<pre tabindex=0><code>2023-03-03 12:00:00.0000000 [INF] Hello, Serilog!
</code></pre><ol start=3>
<li>로그를 구조화 된 표현법으로 변경하면 다음과 같습니다.</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-json data-lang=json>{
  <span style=color:#b06;font-weight:700>&#34;timestamp&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;2023-03-03 12:00:00.0000000&#34;</span>,
  <span style=color:#b06;font-weight:700>&#34;level&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;INFO&#34;</span>,
  <span style=color:#b06;font-weight:700>&#34;messageTemplate&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;Hello, {name}!&#34;</span>,
  <span style=color:#b06;font-weight:700>&#34;properties&#34;</span>: {
    <span style=color:#b06;font-weight:700>&#34;name&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;Serilog&#34;</span>
  }
}
</code></pre></div><p>또한 Deconstruct를 이용하여 데이터를 펼쳐 볼 수 있습니다.
다음과 같은 좌표를 나타내는 클래스가 있다고 가정해봅시다.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-csharp data-lang=csharp><span style=color:#080;font-weight:700>public</span> <span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>Coordinate</span>
{
    <span style=color:#080;font-weight:700>public</span> <span style=color:#888;font-weight:700>double</span> Latitude { <span style=color:#080;font-weight:700>get</span>; <span style=color:#080;font-weight:700>set</span>; }
    <span style=color:#080;font-weight:700>public</span> <span style=color:#888;font-weight:700>double</span> Longitude { <span style=color:#080;font-weight:700>get</span>; <span style=color:#080;font-weight:700>set</span>; }
}
</code></pre></div><p>이 클래스를 다음과 같이 로그에 작성할 수 있습니다.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-csharp data-lang=csharp><span style=color:#888;font-weight:700>var</span> coordinate = <span style=color:#080;font-weight:700>new</span> Coordinate { Latitude = <span style=color:#00d;font-weight:700>37.566535</span>, Longitude = <span style=color:#00d;font-weight:700>126.9779692</span> };
logger.Information(<span style=color:#d20;background-color:#fff0f0>&#34;Hello, {@coordinate}!&#34;</span>, coordinate);
</code></pre></div><p>이렇게 작성된 로그를 수집하면 다음과 같이 나옵니다.</p>
<pre tabindex=0><code>2023-03-03 12:00:00.0000000 [INF] Hello, { Latitude: 37.566535, Longitude: 126.9779692 }!
</code></pre><p>구조화 된 표현법으론 다음과 같이 나옵니다.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-json data-lang=json>{
  <span style=color:#b06;font-weight:700>&#34;timestamp&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;2023-03-03 12:00:00.0000000&#34;</span>,
  <span style=color:#b06;font-weight:700>&#34;level&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;INFO&#34;</span>,
  <span style=color:#b06;font-weight:700>&#34;messageTemplate&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;Hello, {@coordinate}!&#34;</span>,
  <span style=color:#b06;font-weight:700>&#34;properties&#34;</span>: {
    <span style=color:#b06;font-weight:700>&#34;coordinate&#34;</span>: {
      <span style=color:#b06;font-weight:700>&#34;Latitude&#34;</span>: <span style=color:#00d;font-weight:700>37.566535</span>,
      <span style=color:#b06;font-weight:700>&#34;Longitude&#34;</span>: <span style=color:#00d;font-weight:700>126.9779692</span>
    }
  }
}
</code></pre></div><h1 id=serilog를-이용한-로그-수집serilogsinks>Serilog를 이용한 로그 수집(Serilog.Sinks)</h1>
<p>Serilog는 다양한 로그 저장소에 로그를 저장할 수 있도록 다양한 <a href=https://github.com/serilog/serilog/wiki/Provided-Sinks>Sink</a>를 제공합니다.
이 글에서는 <a href=https://github.com/serilog-contrib/Serilog.Sinks.AmazonS3>Serilog.Sinks.AmazonS3</a>를 사용하여 S3에 로그를 저장해 보겠습니다.</p>
<ol>
<li>Serilog.Sinks.AmazonS3 패키지를 설치합니다.</li>
</ol>
<pre tabindex=0><code>dotnet add package Serilog.Sinks.AmazonS3
</code></pre><ol start=2>
<li>Serilog를 appsettings.json을 이용해 초기화합니다.</li>
</ol>
<div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-json data-lang=json>{
  <span style=color:#b06;font-weight:700>&#34;Serilog&#34;</span>: {
    <span style=color:#b06;font-weight:700>&#34;MinimumLevel&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;Information&#34;</span>,
    <span style=color:#b06;font-weight:700>&#34;WriteTo&#34;</span>: [
      {
        <span style=color:#b06;font-weight:700>&#34;Name&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;AmazonS3&#34;</span>,
        <span style=color:#b06;font-weight:700>&#34;Args&#34;</span>: {
          <span style=color:#b06;font-weight:700>&#34;Path&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;log.json&#34;</span>,
          <span style=color:#b06;font-weight:700>&#34;BucketName&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;bucket-name&#34;</span>,
          <span style=color:#b06;font-weight:700>&#34;RollingInterval&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;Day&#34;</span>,
          <span style=color:#b06;font-weight:700>&#34;ServiceUrl&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;https://s3.ap-northeast-2.amazonaws.com&#34;</span>
        }
      }
    ]
  }
}
</code></pre></div><p>권한 등 잘 설정이 되었다면 지정한 버킷에 로그가 저장됩니다.</p>
<h1 id=amazon-glue를-이용한-로그-크롤링>Amazon Glue를 이용한 로그 크롤링</h1>
<p>Amazon S3에 저장된 로그를 Amazon Athena를 이용하여 분석할 수 있습니다.
하지만 Amazon Athena는 JSON 형식의 로그를 분석하기에는 한계가 있습니다.
그래서 Amazon Athena를 이용하여 로그를 분석하기 위해서는 로그를 Amazon Glue를 이용하여 크롤링해야 합니다.</p>
<p>Glue를 이용하여 데이터 카탈로그에 크롤링을 하는 방법은 다음 글을 참고하시면 됩니다.
<a href=https://docs.aws.amazon.com/ko_kr/athena/latest/ug/data-sources-glue.html>https://docs.aws.amazon.com/ko_kr/athena/latest/ug/data-sources-glue.html</a></p>
<h1 id=amazon-athena를-이용한-로그-분석>Amazon Athena를 이용한 로그 분석</h1>
<p>Amazon Athena는 여러 빅데이터 분석 툴과 마찬가지로 SQL을 이용하여 데이터를 분석할 수 있습니다.
다음과 같이 Amazon Athena를 이용하여 로그를 분석할 수 있습니다.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-sql data-lang=sql><span style=color:#080;font-weight:700>SELECT</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-weight:700>timestamp</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-weight:700>level</span>,<span style=color:#bbb>
</span><span style=color:#bbb>  </span>messageTemplate,<span style=color:#bbb>
</span><span style=color:#bbb>  </span>properties.coordinate.Latitude,<span style=color:#bbb>
</span><span style=color:#bbb>  </span>properties.coordinate.Longitude<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-weight:700>FROM</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#d20;background-color:#fff0f0>&#34;database-name&#34;</span>.<span style=color:#d20;background-color:#fff0f0>&#34;table-name&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-weight:700>WHERE</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-weight:700>timestamp</span><span style=color:#bbb> </span><span style=color:#080;font-weight:700>BETWEEN</span><span style=color:#bbb> </span><span style=color:#d20;background-color:#fff0f0>&#39;2023-03-03 00:00:00&#39;</span><span style=color:#bbb> </span><span style=color:#080;font-weight:700>AND</span><span style=color:#bbb> </span><span style=color:#d20;background-color:#fff0f0>&#39;2023-03-03 23:59:59&#39;</span><span style=color:#bbb>
</span></code></pre></div><p>이를 이용하여 여러 분산 네트워크 상의 노드들의 로그를 분석할 수 있습니다.
예시로, 두 노드 간에 통신이 이루어지는 시간을 분석해 보겠습니다.
table1은 노드1의 로그를, table2는 노드2의 로그를 나타냅니다.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-sql data-lang=sql><span style=color:#080;font-weight:700>SELECT</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>table1.<span style=color:#080;font-weight:700>timestamp</span><span style=color:#bbb> </span><span style=color:#080;font-weight:700>AS</span><span style=color:#bbb> </span>node1_timestamp,<span style=color:#bbb>
</span><span style=color:#bbb>  </span>table1.<span style=color:#080;font-weight:700>level</span><span style=color:#bbb> </span><span style=color:#080;font-weight:700>AS</span><span style=color:#bbb> </span>node1_level,<span style=color:#bbb>
</span><span style=color:#bbb>  </span>table1.messageTemplate<span style=color:#bbb> </span><span style=color:#080;font-weight:700>AS</span><span style=color:#bbb> </span>node1_messageTemplate,<span style=color:#bbb>
</span><span style=color:#bbb>  </span>table1.properties.coordinate.Latitude<span style=color:#bbb> </span><span style=color:#080;font-weight:700>AS</span><span style=color:#bbb> </span>node1_latitude,<span style=color:#bbb>
</span><span style=color:#bbb>  </span>table1.properties.coordinate.Longitude<span style=color:#bbb> </span><span style=color:#080;font-weight:700>AS</span><span style=color:#bbb> </span>node1_longitude,<span style=color:#bbb>
</span><span style=color:#bbb>  </span>table2.<span style=color:#080;font-weight:700>timestamp</span><span style=color:#bbb> </span><span style=color:#080;font-weight:700>AS</span><span style=color:#bbb> </span>node2_timestamp,<span style=color:#bbb>
</span><span style=color:#bbb>  </span>table2.<span style=color:#080;font-weight:700>level</span><span style=color:#bbb> </span><span style=color:#080;font-weight:700>AS</span><span style=color:#bbb> </span>node2_level,<span style=color:#bbb>
</span><span style=color:#bbb>  </span>table2.messageTemplate<span style=color:#bbb> </span><span style=color:#080;font-weight:700>AS</span><span style=color:#bbb> </span>node2_messageTemplate,<span style=color:#bbb>
</span><span style=color:#bbb>  </span>table2.properties.coordinate.Latitude<span style=color:#bbb> </span><span style=color:#080;font-weight:700>AS</span><span style=color:#bbb> </span>node2_latitude,<span style=color:#bbb>
</span><span style=color:#bbb>  </span>table2.properties.coordinate.Longitude<span style=color:#bbb> </span><span style=color:#080;font-weight:700>AS</span><span style=color:#bbb> </span>node2_longitude<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-weight:700>FROM</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#d20;background-color:#fff0f0>&#34;database-name&#34;</span>.<span style=color:#d20;background-color:#fff0f0>&#34;table1&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-weight:700>JOIN</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#d20;background-color:#fff0f0>&#34;database-name&#34;</span>.<span style=color:#d20;background-color:#fff0f0>&#34;table2&#34;</span><span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-weight:700>ON</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>table1.properties.coordinate.Latitude<span style=color:#bbb> </span>=<span style=color:#bbb> </span>table2.properties.coordinate.Latitude<span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-weight:700>AND</span><span style=color:#bbb> </span>table1.properties.coordinate.Longitude<span style=color:#bbb> </span>=<span style=color:#bbb> </span>table2.properties.coordinate.Longitude<span style=color:#bbb>
</span><span style=color:#bbb></span><span style=color:#080;font-weight:700>WHERE</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span>table1.<span style=color:#080;font-weight:700>timestamp</span><span style=color:#bbb> </span><span style=color:#080;font-weight:700>BETWEEN</span><span style=color:#bbb> </span><span style=color:#d20;background-color:#fff0f0>&#39;2023-03-03 00:00:00&#39;</span><span style=color:#bbb> </span><span style=color:#080;font-weight:700>AND</span><span style=color:#bbb> </span><span style=color:#d20;background-color:#fff0f0>&#39;2023-03-03 23:59:59&#39;</span><span style=color:#bbb>
</span><span style=color:#bbb>  </span><span style=color:#080;font-weight:700>AND</span><span style=color:#bbb> </span>table2.<span style=color:#080;font-weight:700>timestamp</span><span style=color:#bbb> </span><span style=color:#080;font-weight:700>BETWEEN</span><span style=color:#bbb> </span><span style=color:#d20;background-color:#fff0f0>&#39;2023-03-03 00:00:00&#39;</span><span style=color:#bbb> </span><span style=color:#080;font-weight:700>AND</span><span style=color:#bbb> </span><span style=color:#d20;background-color:#fff0f0>&#39;2023-03-03 23:59:59&#39;</span><span style=color:#bbb>
</span></code></pre></div><p>이런 식으로 로그를 분석하면 두 노드 사이의 통신 시간을 알 수 있습니다.</p>
<h1 id=마치며>마치며</h1>
<p>이 글에서는 Serilog를 이용하여 로그를 수집하고 Amazon Athena를 이용하여 로그를 분석하는 방법을 소개했습니다.
오늘 소개한 방법을 응용하면 다양한 분산 네트워크 상의 노드들의 로그를 분석할 수 있을 것으로 기대합니다.
또한 이 글에서는 성능이나 여러 가지 제약 사항들을 고려하지 않았습니다.
이 글에서 소개한 방법을 실제로 사용할 때는 성능과 여러 제약 사항들을 고려해야 합니다.</p>
<hr>
<p>(이 글은 <a href=https://www.dotnetconf.kr/2023>.NET Conf 2023 x Seoul</a>에 올해 2월 <a href=https://www.dotnetconf.kr/f2ea6fa1-f802-4dba-be87-539d32d3584b>발표한 내용</a>을 각색한 것입니다.)</p>
</article>
<script>(function(){var d,h,e,a,g,c,f,b;if(!location.hash.match(/^#/))return;if(d=document.getElementById('content'),h=window.decodeURIComponent(location.hash.substring(1)),e=document.getElementById(h),a=e.nodeName.match(/^H([123456])$/),!a||e.parentNode!==d)return;g=window.parseInt(a[1]),c=!1;for(f=0;f<d.childNodes.length;f++)b=d.childNodes[f],c?(a=b.nodeName.match(/^H([123456])$/),a&&window.parseInt(a[1])>=g&&(c=!1)):b===e&&(c=!0),!c&&!b.nodeName.match(/^#/)&&(b.className+=' dim')})()</script>
<div class=recruit>
<a href=https://planetariumhq.com>플라네타리움</a>은 게임에 특화된
오픈 소스 P2P 라이브러리 <a href=https://libplanet.io/>Libplanet</a>과,
그 위에서 중앙 서버 없는 온라인 게임
〈<a href=https://nine-chronicles.com/>나인 크로니클</a>〉을 만들고
있습니다. 저희와 흥미로운 기술적 도전을 함께 하실 분들을 모시고 있습니다.
지금 <a href=https://recruit.planetariumhq.com/>인재 영입 페이지</a>를
확인해주세요!
</div>
<div itemprop=author class="fl tc mr3">
<a href=https://github.com/riemannulus rel=author itemprop=url class="no-underline mid-gray b f6">
<img src="https://www.gravatar.com/avatar/9e43b4f2a202a9d7a1e2b180aaaba253?d=https://avatars.githubusercontent.com/riemannulus" itemprop=image class="w3 h3 br-100 mb1">
<br>이수호
</a>
</div>
</section>
<footer>
<div>
<p class="f6 gray mt6 lh-copy">
&copy; 2019&ndash;2023
<a href=https://planetariumlabs.com/ style=color:inherit;text-decoration:inherit>Planetarium</a>.
</p>
</div>
</footer>
</body>
</html>