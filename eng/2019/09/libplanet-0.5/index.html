<!doctype html><html lang=en prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=description content><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content><meta property="og:type" content="article"><meta property="og:description" content><meta property="og:title" content="Libplanet 0.5 Released"><meta property="og:site_name" content="Planetarium Engineering Snack"><meta property="og:url" content="https://snack.planetarium.dev/eng/2019/09/libplanet-0.5/"><meta property="og:locale" content="en"><meta property="article:published_time" content="2019-09-06"><meta property="article:modified_time" content="2019-09-06"><meta name=twitter:card content="summary"><meta name=twitter:site content="@"><meta name=twitter:creator content="@"><meta name=twitter:title content="Libplanet 0.5 Released | Planetarium Engineering Snack"><meta name=twitter:description content="Hello all, we’re delighted to announce that the 5th minor version of Libplanet—Version 0.5 along with patch versions, 0.5.1 and 0.5.2, has been released.
Libplanet is a common library that solves game implementation problems such as P2P communication and data synchronization when creating online multiplayer games that run on distributed P2P.
Version 0.5 includes extensive performance and reliability improvements addressed while testing games developed with Libplanet. This post will cover those major changes of Version 0.5.|"><meta name=twitter:image:src content><meta name=twitter:domain content="https://snack.planetarium.dev/eng/2019/09/libplanet-0.5/"><title>Libplanet 0.5 Released</title>
<link rel=canonical href=https://snack.planetarium.dev/eng/2019/09/libplanet-0.5/><link rel=alternate href=https://snack.planetarium.dev/kor/2019/09/libplanet-0.5/ hreflang=ko title="Libplanet 0.5 릴리스"><link href=https://snack.planetarium.dev/index.xml rel=alternate type=application/atom+xml title="Libplanet 0.5 Released"><link rel=stylesheet href=https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css><link rel=stylesheet href=https://snack.planetarium.dev/css/style.min.1a35efb5c5da4fd20bd2ec86458da5ee7cc1cfc81c4f107944b5e0fc59a3d809.css integrity="sha256-GjXvtcXaT9IL0uyGRY2l7nzBz8gcTxB5RLXg/Fmj2Ak="><script async src="https://www.googletagmanager.com/gtag/js?id=UA-132504786-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-132504786-2")</script><link rel=icon href=/favicon-32x32.png type=image/png sizes=32x32><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/apple-touch-icon.png></head><body class="sans-serif w-90 w-60-ns center center-ns mv2 mv5-ns" itemscope itemtype=http://schema.org/Article><a href=https://snack.planetarium.dev/eng/ id=site-title class="b bb bw1 pb1 no-underline dark-gray">Planetarium Engineering Snack</a><section id=main class=mt5><h1 itemprop=name id=title class=mb1>Libplanet 0.5 Released</h1><div class="f6 gray dib-ns"><time itemprop=datePublished datetime=2019-09-06>September 6, 2019
</time>(<strong></strong>
&bull;
<a href=https://snack.planetarium.dev/kor/2019/09/libplanet-0.5/ hreflang=ko title="Libplanet 0.5 릴리스" class=gray></a>)</div><article itemprop=articleBody id=content class="w-100 lh-copy"><p>Hello all, we’re delighted to announce that the 5th minor version of <a href=https://libplanet.io/>Libplanet</a>—<a href=https://github.com/planetarium/libplanet/releases/tag/0.5.0>Version 0.5</a> along with patch versions, <a href=https://github.com/planetarium/libplanet/releases/tag/0.5.1>0.5.1</a> and <a href=https://github.com/planetarium/libplanet/releases/tag/0.5.2>0.5.2</a>, has been released.</p><p>Libplanet is a common library that solves game implementation problems such as P2P communication and data synchronization when creating online multiplayer games that run on distributed P2P.</p><p>Version 0.5 includes extensive performance and reliability improvements addressed while testing games developed with Libplanet. This post will cover those major changes of Version 0.5.</p><h2 id=abbr-titleinitial-block-downloadibdabbr-speed-improvement><abbr title="Initial Block Download">IBD</abbr> Speed Improvement</h2><p>Previously, <a href=https://bitcoin.org/en/glossary/initial-block-download><abbr title="initial block download">IBD</abbr></a> used to take a long time to execute, even for a small number of blocks. This was because after downloading the blocks, you had to calculate the final state starting from the first block.</p><p>However, if you have a reliable node, it is quite possible to effectively reduce computing time by using precalculated results from that node.</p><p>So, from Version 0.5, by handing over trusted nodes as parameters to <a href=https://docs.libplanet.io/0.5.0/api/Libplanet.Net.Swarm-1.html#Libplanet_Net_Swarm_1_PreloadAsync_System_IProgress_Libplanet_Net_PreloadState__System_Collections_Immutable_IImmutableSet_Libplanet_Address__System_Threading_CancellationToken_><code>Swarm&lt;T>.PreloadAsync()</code></a>, we’re now able to receive, store, and use the most recent state values already computed from those trusted nodes.</p><p>If there aren’t any trusted nodes or the process fails for another reason, IBD computes in the same process as previous versions.</p><h2 id=irandomnextdouble-removed><code>IRandom.NextDouble()</code> Removed</h2><p>Quoting from the <a href="https://docs.microsoft.com/en-us/dotnet/api/system.double?view=netstandard-2.0#remarks">System.Double section of .NET Standard Official Document</a>, it states:</p><blockquote><p>In addition, the result of arithmetic and assignment operations with <code>Double</code> values may differ slightly by platform because of the loss of precision of the <code>Double</code> type. For example, the result of assigning a literal <code>Double</code> value may differ in the 32-bit and 64-bit versions of the .NET Framework.</p></blockquote><p>As stated above, arithmetic operations and substitution of Double can cause indeterminant results. Because of this, we’ve decided not to provide <a href=https://github.com/planetarium/libplanet/pull/419><code>IRandom.NextDouble()</code></a> from this version onwards.</p><p>Please refer to <a href=https://randomascii.wordpress.com/2013/07/16/floating-point-determinism/>this article</a> for further information.</p><h2 id=block-action>Block Action</h2><p>In order to keep chains secure, we need miners to mine the blocks, and we need to reward miners to recruit and keep them.</p><p>Previously for miners to be rewarded, they had to add a transaction with reward actions to the block each time. But from this version, the new <a href=https://docs.libplanet.io/0.5.0/api/Libplanet.Blockchain.Policies.IBlockPolicy-1.html#Libplanet_Blockchain_Policies_IBlockPolicy_1_BlockAction><code>IBlockPolicy&lt;T>.BlockAction</code></a> property, which is executed for every block, enables code implementation that rewards miners for each block action.</p><h2 id=filestore-removed><code>FileStore</code> Removed</h2><p>Libplanet had been providing an interface called <a href=https://docs.libplanet.io/0.5.0/api/Libplanet.Store.IStore.html><code>IStore</code></a>, <a href=https://docs.libplanet.io/0.4.0/api/Libplanet.Store.FileStore.html><code>FileStore</code></a> (a file-based implementation of <code>IStore</code>), as well as <a href=https://docs.libplanet.io/0.5.0/api/Libplanet.Store.LiteDBStore.html><code>LiteDBStore</code></a> (implementation based on <a href=https://www.litedb.org/>LiteDB</a>) since Version <a href=/eng/2019/07/libplanet-0.4/>0.4</a> to simplify the storage layer. Despite the benefits of its simplistic implementation, however, <code>FileStore</code> also had the following limitations:</p><ul><li>There were just too many files created because every block, every transaction, and the status of every account block were stored as separate files.</li><li>With no separate cache or buffer, I/O performance was significantly affected by what physical storage device were used.</li></ul><p>As we started using LiteDB, <code>FileStore</code> usage rate began to diminish. And so, considering the difficulty of continuously managing <code>FileStore</code>, we decided not to provide <code>FileStore</code> implementation from Version 0.5.</p><h2 id=more-detailed-preload-progress>More Detailed Preload Progress</h2><p>To carry out the IBD mentioned above, you can call the <a href=https://docs.libplanet.io/0.5.0/api/Libplanet.Net.Swarm-1.html#Libplanet_Net_Swarm_1_PreloadAsync_System_IProgress_Libplanet_Net_PreloadState__System_Collections_Immutable_IImmutableSet_Libplanet_Address__System_Threading_CancellationToken_><code>Swarm&lt;T>.PreloadAsync()</code></a> method. And previously, sending <code>IProgress&lt;BlockDownloadState></code> to this method’s parameter could tell us about the progress of the block download, but it couldn’t tell us about the specific progress from running actions to the final status after the block download (or from a trusted node).</p><p>Therefore, the waiting time of this previous method had to be quite boring for players since the loading message only showed either <q>loading</q> or <q>100%</q> and no specific progress of the block download.</p><p>However, from Version 0.5, by receiving the <code>IProgress&lt;PreloadState></code> type parameter instead of <code>IProgress&lt;BlockDownloadState></code>, this allows us to get a detailed view of the entire preload progress.</p><p>Through <code>IProgress&lt;PreloadState></code> object which receives <a href=https://docs.libplanet.io/0.5.0/api/Libplanet.Net.BlockDownloadState.html><code>BlockDownloadState</code></a>, <a href=https://docs.libplanet.io/0.5.0/api/Libplanet.Net.BlockStateDownloadState.html><code>BlockStateDownloadState</code></a>, <a href=https://docs.libplanet.io/0.5.0/api/Libplanet.Net.StateReferenceDownloadState.html><code>StateReferenceDownloadState</code></a> and <a href=https://docs.libplanet.io/0.5.0/api/Libplanet.Net.ActionExecutionState.html><code>ActionExecutionState</code></a> as parameters inherited from <a href=https://docs.libplanet.io/0.5.0/api/Libplanet.Net.PreloadState.html><code>PreloadState</code></a>, users are provided with more detailed information.</p><h2 id=furthermore>Furthermore</h2><p>You can learn more about additional changes in our <a href=https://github.com/planetarium/libplanet/releases/tag/0.5.0>0.5.0</a>, <a href=https://github.com/planetarium/libplanet/releases/tag/0.5.1>0.5.1</a>, <a href=https://github.com/planetarium/libplanet/releases/tag/0.5.2>0.5.2</a> release notes.</p><p>And as always, if you have any questions about the new release or Libplanet in general, please visit our <a href=https://discord.gg/planetarium>Discord chatroom</a> and let’s chat!</p></article><script>(function(){if(!location.hash.match(/^#/))return;var t,n,s,a,o=document.getElementById("content"),r=window.decodeURIComponent(location.hash.substring(1)),i=document.getElementById(r),e=i.nodeName.match(/^H([123456])$/);if(!e||i.parentNode!==o)return;for(a=window.parseInt(e[1]),t=!1,s=0;s<o.childNodes.length;s++)n=o.childNodes[s],t?(e=n.nodeName.match(/^H([123456])$/),e&&window.parseInt(e[1])>=a&&(t=!1)):n===i&&(t=!0),!t&&!n.nodeName.match(/^#/)&&(n.className+=" dim")})()</script><div itemprop=author class="fl tc mr3"><a href=https://github.com/moreal rel=author itemprop=url class="no-underline mid-gray b f6"><img src="https://www.gravatar.com/avatar/0be9fcfeb2a4517ecf4d37054377c001?d=https://avatars.githubusercontent.com/moreal" itemprop=image class="w3 h3 br-100 mb1"><br>Lee Dogeon</a></div></section><footer><div><p class="f6 gray mt6 lh-copy">&copy; 2019&ndash;2023
<a href=https://planetariumlabs.com/ style=color:inherit;text-decoration:inherit>Planetarium</a>.</p></div></footer></body></html>