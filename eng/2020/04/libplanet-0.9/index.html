<!doctype html><html lang prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=description content><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content><meta property="og:type" content="article"><meta property="og:description" content><meta property="og:title" content="Libplanet 0.9 Released"><meta property="og:site_name" content="Planetarium Engineering Snack"><meta property="og:image" content="https://snack.planetarium.dev/og/eng.png"><meta property="og:url" content="https://snack.planetarium.dev/eng/2020/04/libplanet-0.9/"><meta property="og:locale" content><meta property="article:published_time" content="2020-04-28"><meta property="article:modified_time" content="2020-04-28"><meta name=twitter:card content="summary"><meta name=twitter:site content="@"><meta name=twitter:creator content="@"><meta name=twitter:title content="Libplanet 0.9 Released | Planetarium Engineering Snack"><meta name=twitter:description content="Hello Everyone! We have released the ninth minor version of Libplanet, Version 0.9.
Libplanet is a common library that solves game implementation problems such as P2P communication and data synchronization when creating online multiplayer games that run on distributed P2P.
From this version, Libplanet will be distributed in several NuGet packages. This is because Libplanet&rsquo;s externalities have expanded, making it too heavy to include some of the dependent libraries across all applications.|"><meta name=twitter:image:src content><meta name=twitter:domain content="https://snack.planetarium.dev/eng/2020/04/libplanet-0.9/"><title>Libplanet 0.9 Released</title>
<link rel=canonical href=https://snack.planetarium.dev/eng/2020/04/libplanet-0.9/><link rel=alternate href=https://snack.planetarium.dev/kor/2020/04/libplanet-0.9/ hreflang=ko title="Libplanet 0.9 릴리스"><link href=https://snack.planetarium.dev/index.xml rel=alternate type=application/atom+xml title="Libplanet 0.9 Released"><link rel=stylesheet href=https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css><link rel=stylesheet href=https://snack.planetarium.dev/css/style.min.1a35efb5c5da4fd20bd2ec86458da5ee7cc1cfc81c4f107944b5e0fc59a3d809.css integrity="sha256-GjXvtcXaT9IL0uyGRY2l7nzBz8gcTxB5RLXg/Fmj2Ak="><script async src="https://www.googletagmanager.com/gtag/js?id=UA-132504786-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-132504786-2")</script><link rel=icon href=/favicon-32x32.png type=image/png sizes=32x32><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/apple-touch-icon.png></head><body class="sans-serif w-90 w-60-ns center center-ns mv2 mv5-ns" itemscope itemtype=http://schema.org/Article><a href=https://snack.planetarium.dev/eng/ id=site-title class="b bb bw1 pb1 no-underline dark-gray">Planetarium Engineering Snack</a><section id=main class=mt5><h1 itemprop=name id=title class=mb1>Libplanet 0.9 Released</h1><div class="f6 gray dib-ns"><time itemprop=datePublished datetime=2020-04-28>April 28, 2020
</time>(<strong>English</strong>
&bull;
<a href=https://snack.planetarium.dev/kor/2020/04/libplanet-0.9/ hreflang=ko title="Libplanet 0.9 릴리스" class=gray>한국어</a>)</div><article itemprop=articleBody id=content class="w-100 lh-copy"><p>Hello Everyone! We have released the ninth minor version of <a href=https://libplanet.io/>Libplanet</a>, <a href=https://github.com/planetarium/libplanet/releases/tag/0.9.0>Version 0.9</a>.</p><p>Libplanet is a common library that solves game implementation problems such as P2P communication and data synchronization when creating online multiplayer games that run on distributed P2P.</p><p>From this version, Libplanet will be distributed in several NuGet packages. This is because Libplanet&rsquo;s externalities have expanded, making it too heavy to include some of the dependent libraries across all applications.</p><p>This piece introduces the new NuGet packages and addresses key major changes in Version 0.9.</p><h2 id=libplanetrocksdbstore><a href=https://www.nuget.org/packages/Libplanet.RocksDBStore/>Libplanet.RocksDBStore</a></h2><p>A newly added Nuget package, Libplanet.RocksDBStore includes <code>RocksDBStore</code> class, which is Lipblanet&rsquo;s <a href=https://docs.libplanet.io/0.9.0/api/Libplanet.Store.IStore.html><code>IStore</code> interface</a> implemented as <a href=https://rocksdb.org/>RocksDB</a> backend. Through internal testing, <code>RocksDBStore</code> has shown to be about 10 times faster to write, 2 times faster to read, and thanks to compression, takes 15% less storage space than <a href=https://docs.libplanet.io/0.9.0/api/Libplanet.Store.DefaultStore.html><code>DefaultStore</code></a>.</p><p>Despite the advantages mentioned above, it might be difficult to use <code>RocksDBStore</code> on some platforms because the RocksDB native binary, written in C++, needs to be distributed together with an application.
Therefore, <code>RocksDBStore</code> class is not distributed as a Libplanet package, but as a separate NuGet package called Libplanet.RocksDBStore. <code>DefaultStore</code> is still available in the Libplanet package. And so when developing, you can first use <code>DefaultStore</code> that&rsquo;s easy to install and use <code>RocksDBStore</code> only for testing and actual deployment. Or, for platforms that are difficult to provide RocksDB binaries, you can just go with the <code>DefaultStore</code>.</p><p>For more information, see <a href=https://snack.planetarium.dev/eng/2020/04/rocksdb/>Applying RocksDB to Libplanet</a> written by Seunghun Lee.</p><h2 id=receiving-blocks-from-multiple-peers>Receiving Blocks from Multiple Peers</h2><p>Up to this version, <a href=https://docs.libplanet.io/0.9.0/api/Libplanet.Net.Swarm-1.html#Libplanet_Net_Swarm_1_PreloadAsync_System_Nullable_TimeSpan__IProgress_Libplanet_Net_PreloadState__IImmutableSet_Libplanet_Address__EventHandler_Libplanet_Net_PreloadBlockDownloadFailEventArgs__CancellationToken_><code>PreloadAsync()</code></a> and <a href=https://docs.libplanet.io/0.9.0/api/Libplanet.Net.Swarm-1.html#Libplanet_Net_Swarm_1_StartAsync_TimeSpan_TimeSpan_CancellationToken_><code>StartAsync()</code> method</a> of <a href=https://docs.libplanet.io/0.9.0/api/Libplanet.Net.Swarm-1.html><code>Swarm&lt;T></code> class</a> requested and received all blocks from a single peer to catch up with blocks piled up on the network. But unfortunately, if there were many piles of blocks, it would take a long time to get them from just one peer.
And if you were unlucky, you might request blocks from a peer with a very slow connection which would take extra longer time. It also put a lot of pressure on the peer that’s sending the blocks and it was especially hard to ignore the burden for seed nodes that were set by default for deployed applications.</p><p>So starting with this version, block downloads are improved to be evenly distributed across multiple peers and even when there’s a slow peer among the senders, the downloading speed has been significantly reduced.</p><h2 id=signed-app-protocol-version>Signed App Protocol Version</h2><p>Last year, <a href=https://snack.planetarium.dev/eng/2019/05/libplanet-0.3/#responsive-apis-for-nodes-with-different-versions>Libplanet 0.3 added <code>appProtocolVersion</code> parameter in the <code>Swarm&lt;T</code>() constructor.</a> This allowed nodes with compatible protocols to communicate with each other and adequately handled nodes without compatible protocols according to the application.</p><p>Our team also took advantage of this feature and used it for software updates when encountering a higher version of the node. But with this use, we realized that a modulated software could be used to maliciously display high-version numbers (which have never been reported) and attack other nodes to attempt false software updates.</p><p>To avoid this, the application protocol version that used to be described as <a href=https://docs.microsoft.com/en-us/dotnet/api/system.int32><code>System.Int32</code></a> is now changed to <a href=https://docs.libplanet.io/0.9.0/api/Libplanet.Net.AppProtocolVersion.html><code>AppProtocolVersion</code> type</a>, which includes multiple metadata such as signatures and signers. The app protocol version must be signed, and each node will <em>individually</em> determine which signer&rsquo;s version of the app protocol it will trust using the <code>trustedAppProtocolVersionSigners</code> parameter in the <code>Swarm&lt;T>()</code> constructor.</p><p>This approach protects each node from unintended (modified) software updates, while also giving each node the freedom to choose a different application roadmap that is freely forked if desired.</p><h2 id=key-storage>Key Storage</h2><p>Last year, <a href=https://snack.planetarium.dev/eng/2019/11/libplanet-0.7/#key-store-implementation-to-safely-store-personal-keys>Libplanet added a <code>ProtectedPrivateKey</code> class to safely store <code>PrivateKey</code> in Version 0.7.</a> However, because <a href=https://docs.libplanet.io/0.9.0/api/Libplanet.KeyStore.ProtectedPrivateKey.html><code>ProtectedPrivateKey</code></a> deals with only one key, handling multiple keys required a separate implementation for the application to create a directory, set a file name, and write the file.</p><p>So from this version, <a href=https://docs.libplanet.io/0.9.0/api/Libplanet.KeyStore.Web3KeyStore.html><code>Web3KeyStore</code></a> class, which physically preserves and manages keys, are now available, eliminating the need to implement these features separately. In addition to the <code>Web3KeyStore</code> that preserves keys in <a href=https://github.com/ethereum/wiki/wiki/Web3-Secret-Storage-Definition>Web3 Secret Storage Definition</a> format, we have also introduced <a href=https://docs.libplanet.io/0.9.0/api/Libplanet.KeyStore.IKeyStore.html><code>IKeyStore</code> Interface</a>, which abstracts specific preservation methods (implementation details).</p><h2 id=planet-cli-utility><code>planet</code>: CLI Utility</h2><p><a href=https://docs.libplanet.io/0.9.0/api/Libplanet.Net.Swarm-1.html#Libplanet_Net_Swarm_1__ctor_Libplanet_Blockchain_BlockChain__0__Libplanet_Crypto_PrivateKey_Libplanet_Net_AppProtocolVersion_System_Int32_System_String_System_Nullable_System_Int32__IEnumerable_Libplanet_Net_IceServer__Libplanet_Net_DifferentAppProtocolVersionEncountered_IEnumerable_Libplanet_Crypto_PublicKey__><code>Swarm&lt;T>()</code> constructor</a> has <a href=https://snack.planetarium.dev/eng/2020/02/libplanet-0.8/#genesis-block-anticipation>assumed a specific genesis block since last version</a> and <a href=/eng/2020/04/libplanet-0.9/#signed-app-protocol-version>from this version, it signs the app protocol version.</a> Because these values include the results of cryptographic algorithm, it is impossible for a human to randomly generate the value. However, since the development process does require a lot of filling up random values, it was definitely a hassle to call up Libplanet APIs from C# interactive shells or PowerShell to calculate the desired values.</p><p>To make this easier, we are deploying a <abbr title="command-line interface">CLI</abbr> utility called <code>planet</code> from this version. The <code>planet</code> command contains multiple subcommands, and currently provides key storage management and app protocol version signing feature. In the future, features such as creating a random genesis block will be added. Please check the <code>planet --help</code> command for detailed instructions.</p><p>The <code>planet</code> command is distributed in a NuGet package called <a href=https://www.nuget.org/packages/Libplanet.Tools/>Libplanet.Tools</a>, which can be installed on systems with .NET Core SDK using the following command:</p><div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-bash data-lang=bash><span style=display:flex><span>dotnet tool install -g Libplanet.Tools
</span></span></code></pre></div><p>If the .NET Core SDK is not installed, you can also download and install the official binary uploaded on the <a href=https://github.com/planetarium/libplanet/releases/tag/0.9.0>Release Page</a>. The official binary is available in three versions: Linux (x64), macOS (x64), and Windows (x64).</p><h2 id=furthermore>Furthermore</h2><p>You can learn more about additional changes in our <a href=https://github.com/planetarium/libplanet/releases/tag/0.9.0>release notes</a>.</p><p>If you’re interested, install and try it out! And as always, if you have any questions about the new release or Libplanet in general, please visit our <a href=https://discord.gg/planetarium>Discord chatroom</a> and let’s chat!</p></article><script>(function(){if(!location.hash.match(/^#/))return;var t,n,s,a,o=document.getElementById("content"),r=window.decodeURIComponent(location.hash.substring(1)),i=document.getElementById(r),e=i.nodeName.match(/^H([123456])$/);if(!e||i.parentNode!==o)return;for(a=window.parseInt(e[1]),t=!1,s=0;s<o.childNodes.length;s++)n=o.childNodes[s],t?(e=n.nodeName.match(/^H([123456])$/),e&&window.parseInt(e[1])>=a&&(t=!1)):n===i&&(t=!0),!t&&!n.nodeName.match(/^#/)&&(n.className+=" dim")})()</script><div itemprop=author class="fl tc mr3"><a href=https://github.com/dahlia rel=author itemprop=url class="no-underline mid-gray b f6"><img src="https://www.gravatar.com/avatar/03acbf60571d4ef2bf3741aecfa1b8cb?d=https://avatars.githubusercontent.com/dahlia" itemprop=image class="w3 h3 br-100 mb1"><br>Hong Minhee</a></div></section><footer><div><p class="f6 gray mt6 lh-copy">&copy; 2019&ndash;2023
<a href=https://planetariumlabs.com/ style=color:inherit;text-decoration:inherit>Planetarium</a>.</p></div></footer></body></html>