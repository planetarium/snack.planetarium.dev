<!doctype html><html lang=en prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><meta name=description content><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content><meta property="og:type" content="article"><meta property="og:description" content><meta property="og:title" content="Decentralization Intersects with Online Game"><meta property="og:site_name" content="Planetarium Engineering Snack"><meta property="og:image" content="https://snack.planetarium.dev/1/01/decentralized-and-online-game-intersect/images/bug-report.png"><meta property="og:image" content="https://snack.planetarium.dev/1/01/decentralized-and-online-game-intersect/images/orphaned-block.png"><meta property="og:image" content="https://snack.planetarium.dev/1/01/decentralized-and-online-game-intersect/images/orphaned-blocks.png"><meta property="og:image" content="https://snack.planetarium.dev/1/01/decentralized-and-online-game-intersect/images/single-chain.png"><meta property="og:url" content="https://snack.planetarium.dev/eng/2020/10/decentralized-and-online-game-intersect/"><meta property="og:locale" content="en"><meta property="article:published_time" content="2020-10-08"><meta property="article:modified_time" content="2020-10-08"><meta name=twitter:card content="summary"><meta name=twitter:site content="@"><meta name=twitter:creator content="@"><meta name=twitter:title content="Decentralization Intersects with Online Game | Planetarium Engineering Snack"><meta name=twitter:description content="Hello all! I&rsquo;m Muhun Kim, an engineering intern at Planetarium for the past two months. I was involved in the beta process prior to the launch of Nine Chronicles.
In this post, I’d like to introduce a technical example that I thought was unique when combining blockchain and games.
Decentralization
Online games use servers to operate services, such as multi-play and user data. However, if services go down for a number of reasons, such as when game companies shut down, you will no longer be able to play the games.|"><meta name=twitter:image:src content><meta name=twitter:domain content="https://snack.planetarium.dev/eng/2020/10/decentralized-and-online-game-intersect/"><title>Decentralization Intersects with Online Game</title>
<link rel=canonical href=https://snack.planetarium.dev/eng/2020/10/decentralized-and-online-game-intersect/><link rel=alternate href=https://snack.planetarium.dev/kor/2020/10/decentralized-and-online-game-intersect/ hreflang=ko title="탈중앙과 온라인 게임이 교차하다"><link href=https://snack.planetarium.dev/index.xml rel=alternate type=application/atom+xml title="Decentralization Intersects with Online Game"><link rel=stylesheet href=https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css><link rel=stylesheet href=https://snack.planetarium.dev/css/style.min.1a35efb5c5da4fd20bd2ec86458da5ee7cc1cfc81c4f107944b5e0fc59a3d809.css integrity="sha256-GjXvtcXaT9IL0uyGRY2l7nzBz8gcTxB5RLXg/Fmj2Ak="><script async src="https://www.googletagmanager.com/gtag/js?id=UA-132504786-2"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-132504786-2")</script><link rel=icon href=/favicon-32x32.png type=image/png sizes=32x32><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon href=/apple-touch-icon.png></head><body class="sans-serif w-90 w-60-ns center center-ns mv2 mv5-ns" itemscope itemtype=http://schema.org/Article><a href=https://snack.planetarium.dev/eng/ id=site-title class="b bb bw1 pb1 no-underline dark-gray">Planetarium Engineering Snack</a><section id=main class=mt5><h1 itemprop=name id=title class=mb1>Decentralization Intersects with Online Game</h1><div class="f6 gray dib-ns"><time itemprop=datePublished datetime=2020-10-08>October 8, 2020
</time>(<strong></strong>
&bull;
<a href=https://snack.planetarium.dev/kor/2020/10/decentralized-and-online-game-intersect/ hreflang=ko title="탈중앙과 온라인 게임이 교차하다" class=gray></a>)</div><article itemprop=articleBody id=content class="w-100 lh-copy"><p>Hello all! I&rsquo;m Muhun Kim, an engineering intern at Planetarium for the past two months. I was involved in the beta process prior to the launch of <a href=https://nine-chronicles.com>Nine Chronicles</a>.</p><p>In this post, I’d like to introduce a technical example that I thought was unique when combining blockchain and games.</p><h2 id=decentralization>Decentralization</h2><p>Online games use servers to operate services, such as multi-play and user data. However, if services go down for a number of reasons, such as when game companies shut down, you will no longer be able to play the games.</p><p>If everyone can divide online game services and maintain them, people won’t need to worry about shutting down as long as players keep playing. Decentralization, which fits this concept, means sharing the role of traditional central servers with fellow users. You&rsquo;ve probably heard of <abbr title="Peer to peer">P2P</abbr> or distributed technology at least once.</p><h2 id=chain-reorganization>Chain Reorganization</h2><p>Planetarium utilizes blockchain among many decentralized technologies to preserve data such as game assets, user items, and quests achieved.</p><p>Meanwhile, when you store game data in the blockchain, sometimes the information reverts back a few hours. This is a known defect called <dfn>reorganization</dfn> in the blockchain network.<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> In the blockchain community, this is called <dfn>reorg</dfn> for short. I’ll also refer to this concept as reorg.</p><figure><img src=/1/01/decentralized-and-online-game-intersect/images/single-chain.png alt="Blocks connected in order are called a chain."><figcaption><p>Blocks connected in order are called a chain.</p></figcaption></figure><p>Before explaining reorg, I’d like to point out that a blockchain network always points to a single chain as its original copy.</p><p>Blocks in a blockchain can be created by anyone. However, if nodes<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> create blocks simultaneously, multiple chains with the same beginning but different ends appear. If so, how can we adopt a chain as the original even though there’s no central figure to decide?</p><figure><img src=/1/01/decentralized-and-online-game-intersect/images/orphaned-block.png alt="At similar points in time, the chain with more resources used will be adopted."><figcaption><p>At similar points in time, the chain with more resources used will be adopted.</p></figcaption></figure><p>Instead of choosing its own chain, each node chooses the chain that best fits the rule shared by all nodes. The <abbr title=proof-of-work>PoW</abbr> approach used by Nine Chronicles and Libplanet, adopts the chain with more resources invested in among blocks created at a similar time.</p><figure><img src=/1/01/decentralized-and-online-game-intersect/images/orphaned-blocks.png alt="The blue chain with 5 blocks, is reorg-ed to red blocks. (Deep Reorg)"><figcaption><p>The blue chain with 5 blocks, is reorg-ed to red blocks. (Deep Reorg)</p></figcaption></figure><p>But when another chain that better meets this rule than the adopted chain appears in the network, the network will adopt the new chain which will cause a flip.</p><p>Normally, a shallow reorg occurs with one or two blocks, but if the depth of divided blocks is greater than a certain number, a deep reorg occurs. For example:</p><ol><li>Chains are divided at A and B and broadcasted to other nodes.</li><li>The number of nodes that either received chain at A or B increases at a similar rate and the length of the chain increases.</li><li>All nodes have adopted either chain at A or B, and because the chain at A is longer than B, the rate of adoption is higher.</li><li>All nodes that have adopted chain at B will be reorg-ed to A.</li></ol><style>@media screen and (min-width:70em){img[src="images/bug-report.png"]{width:60%}}</style><figure><img src=/1/01/decentralized-and-online-game-intersect/images/bug-report.png alt="A user who owned 10,000 gold yesterday reported having less than 1,000 gold."><figcaption><p>A user who owned 10,000 gold yesterday reported having less than 1,000 gold.</p></figcaption></figure><p>So, as I have said earlier, it&rsquo;s been often mentioned in the Nine Chronicles community that the level and items users originally had ended up reverting back to what they were a few minutes or hours ago due to reorg.<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> Because this occurs on a decentralized network, players unfortunately can&rsquo;t ask a central operator(i.e. game company) to restore it.</p><h2 id=blockchain-network-reset>Blockchain Network Reset</h2><p>Nine Chronicles has reset its blockchain network seven times during the beta period. When the network is reset, all players’ game data becomes reset as well. Here’s the reason why the reset was carried out despite certain risks:</p><p>The blockchain network core <a href=https://libplanet.io/>Libplanet</a> stores the state of the game in blocks. Player’s behavior is stored with a data structure called <a href=https://docs.libplanet.io/0.9.5/api/Libplanet.Action.IAction.html>Action</a>.</p><div class=highlight><pre tabindex=0 style=background-color:#fff><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#b06;font-weight:700>&#34;stageId&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;123&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#b06;font-weight:700>&#34;id&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;ntPSdIREOUOARaRYJHlGEg==&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#b06;font-weight:700>&#34;equipments&#34;</span>: [<span style=color:#d20;background-color:#fff0f0>&#34;KTm6cLkrtEWs6k4A821K3Q==&#34;</span>],
</span></span><span style=display:flex><span>  <span style=color:#b06;font-weight:700>&#34;avatarAddress&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;sGo0bo0VwrYA7ubq6yV8ctiU2vc=&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#b06;font-weight:700>&#34;foods&#34;</span>: [],
</span></span><span style=display:flex><span>  <span style=color:#b06;font-weight:700>&#34;worldId&#34;</span>: <span style=color:#d20;background-color:#fff0f0>&#34;3&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>If a costume element is updated within the game, a new property is added, such as <code>costumes</code>, and the hash<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup> of the block containing this information does not match the protocol that creates the hash of the previous block. And if the protocol changes, previous block data will not be able to be used consecutively.<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup> In addition, the protocol changes if the unique values are different, or if the code in <a href=https://libplanet.io/>Libplanet</a> or its SDK is modified that affects the hash.</p><p>In these cases, other blockchains usually add protocols to interpret blocks differently after a certain number of blocks. Nine Chronicles may do the same, but we found this method to be unnecessary during the beta period, when changes are frequent, large and small. That&rsquo;s why we decided to reset the chain every time.</p><p>Of course, we will be maintaining the chain after the official launch. A number of suggestions have been reviewed, and if there is a chance, we will introduce them on this blog.</p><h2 id=closing>Closing</h2><p>Planetarium is looking forward to establishing a new type of game culture with &ldquo;community-run online games.&rdquo; Sometimes we see on the media that an employee of an online game company embezzled game resources, destroying the game&rsquo;s ecosystem. Nine Chronicles can&rsquo;t do that in principle because the rules of the game are transparent to the protocol level.</p><p>Despite these advantages, the blockchain protocol used by Libplanet can be felt as an entry barrier. It&rsquo;s similar to the shock I felt when I first saw Git, which distributes the work by line and merges automatically. So we’d love to hear about your experience, thoughts, and concerns playing Nine Chronicles on our <a href=https://discord.gg/planetarium>discord channel</a> and on GitHub<sup id=fnref:6><a href=#fn:6 class=footnote-ref role=doc-noteref>6</a></sup>.</p><p>This post will be published as a series, and the next issue will introduce Nine Chronicles&rsquo; handling of reorg and chain resets. Thanks!</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Our engineering team calls this a mirage phenomenon because the game data disappears like a dream.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Computer that participates in the blockchain network.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>The player&rsquo;s perspective was well explained in the <a href=https://dpsyphle.ninja/2020/08/16/rollbacks-in-decentralized-games.html>game review</a> written by See-eun Ha, Co-founder of Blockchain Co-living and Co-working Community, Nonce.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>A blockchain connects the chain using the hash of the previous block as a meta information, similar to a linked list.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>It is possible that game clients with expanded specifications may not be able to interpret the previous block correctly.&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:6><p>In addition to the Blockchain Core for P2P online games — <a href=https://github.com/planetarium/libplanet>Libplanet</a>,
Libplanet-based SDK for Nine Chronicles — <a href=https://github.com/planetarium/lib9c>Lib9c</a>, Blockchain Node Service dedicated to Nine Chronicle Clients — <a href=https://github.com/planetarium/ninechronicles.standalone>NineChronicles.Standalone</a>, we will also be releasing the repositories of the launcher and game client for Nine Chronicles.&#160;<a href=#fnref:6 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></article><script>(function(){if(!location.hash.match(/^#/))return;var t,n,s,a,o=document.getElementById("content"),r=window.decodeURIComponent(location.hash.substring(1)),i=document.getElementById(r),e=i.nodeName.match(/^H([123456])$/);if(!e||i.parentNode!==o)return;for(a=window.parseInt(e[1]),t=!1,s=0;s<o.childNodes.length;s++)n=o.childNodes[s],t?(e=n.nodeName.match(/^H([123456])$/),e&&window.parseInt(e[1])>=a&&(t=!1)):n===i&&(t=!0),!t&&!n.nodeName.match(/^#/)&&(n.className+=" dim")})()</script><div itemprop=author class="fl tc mr3"><a href=https://github.com/x86chi rel=author itemprop=url class="no-underline mid-gray b f6"><img src="https://www.gravatar.com/avatar/c93656ae682a9721e1bdb3215c208309?d=https://avatars.githubusercontent.com/x86chi" itemprop=image class="w3 h3 br-100 mb1"><br>Muhun Kim</a></div></section><footer><div><p class="f6 gray mt6 lh-copy">&copy; 2019&ndash;2023
<a href=https://planetariumlabs.com/ style=color:inherit;text-decoration:inherit>Planetarium</a>.</p></div></footer></body></html>